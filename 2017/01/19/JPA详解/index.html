<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="java,jpa,api," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="@Table默认情况下，JPA 持续性提供程序假设实体的所有持久字段均存储到一个名称为实体名称的数据库表中（请参阅 @Entity）。
在以下条件下，使用 @Table 批注指定与实体关联的主表：
·   实体名称难于处理、是一个保留字、与预先存在的数据模型不兼容或作为数据库中的表名无效
·   需要控制表所属的目录或模式
如果希望 JPA 将某些字段持久保存到主表，而将其他字段持久保存到一个或多">
<meta property="og:type" content="article">
<meta property="og:title" content="JPA详解">
<meta property="og:url" content="http://flyUnique.github.io/2017/01/19/JPA详解/index.html">
<meta property="og:site_name" content="flyUnique">
<meta property="og:description" content="@Table默认情况下，JPA 持续性提供程序假设实体的所有持久字段均存储到一个名称为实体名称的数据库表中（请参阅 @Entity）。
在以下条件下，使用 @Table 批注指定与实体关联的主表：
·   实体名称难于处理、是一个保留字、与预先存在的数据模型不兼容或作为数据库中的表名无效
·   需要控制表所属的目录或模式
如果希望 JPA 将某些字段持久保存到主表，而将其他字段持久保存到一个或多">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif">
<meta property="og:updated_time" content="2017-01-19T03:49:05.945Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JPA详解">
<meta name="twitter:description" content="@Table默认情况下，JPA 持续性提供程序假设实体的所有持久字段均存储到一个名称为实体名称的数据库表中（请参阅 @Entity）。
在以下条件下，使用 @Table 批注指定与实体关联的主表：
·   实体名称难于处理、是一个保留字、与预先存在的数据模型不兼容或作为数据库中的表名无效
·   需要控制表所属的目录或模式
如果希望 JPA 将某些字段持久保存到主表，而将其他字段持久保存到一个或多">
<meta name="twitter:image" content="http://flyUnique.github.io/file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> JPA详解 | flyUnique </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">flyUnique</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">海乃百川，有容乃大</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                JPA详解
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-01-19T11:47:15+08:00" content="2017-01-19">
              2017-01-19
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Table"><a href="#Table" class="headerlink" title="@Table"></a><strong>@Table</strong></h1><p>默认情况下，JPA 持续性提供程序假设实体的所有持久字段均存储到一个名称为实体名称的数据库表中（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Entity" target="_blank" rel="external">@Entity</a>）。</p>
<p>在以下条件下，使用 @Table 批注指定与实体关联的主表：</p>
<p>·   实体名称难于处理、是一个保留字、与预先存在的数据模型不兼容或作为数据库中的表名无效</p>
<p>·   需要控制表所属的目录或模式</p>
<p>如果希望 JPA 将某些字段持久保存到主表，而将其他字段持久保存到一个或多个辅助表，请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SecondaryTable" target="_blank" rel="external">@SecondaryTable</a>。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGEAJB" target="_blank" rel="external">表 1-45</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Table.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-45 @Table 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>catalog</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序使用任何适用于数据库的默认目录。  如果默认目录不适合于应用程序，请将  catalog 设置为要使用的 String 目录名。</td>
</tr>
<tr>
<td>name</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序假设实体的数据库表与实体类同名。在<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCGHGA" target="_blank" rel="external">示例 1-86</a> 中，默认 name 为 Employee。  如果实体类名难以处理、是一个保留字或与预先存在的数据模型不兼容，请将  name 设置为相应的数据表名称。在<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCGHGA" target="_blank" rel="external">示例 1-86</a> 中，JPA 将实体类 Employee 持久保存到名为 EMP 的数据库表中。</td>
</tr>
<tr>
<td>schema</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序使用任何适用于数据库的默认模式。  如果默认模式不适合于应用程序，请将  schema 设置为要使用的 String 模式名。</td>
</tr>
<tr>
<td>uniqueConstraints</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序假设实体的数据库表中的任何列均没有唯一约束。  如果唯一约束应用于该表中的一列或多列，请将 uniqueContraints 设置为一个或多个 UniqueConstraint 实例的数组。有关详细信息，请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#UniqueConstraint" target="_blank" rel="external">@UniqueConstraint</a>。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCGHGA" target="_blank" rel="external">示例 1-86</a> 显示了如何使用此批注指定主表名。</p>
<p>示例 1-86 @Table</p>
<p>@Entity</p>
<p>@Table(name=”EMP”)</p>
<p>public class Employee implements Serializable {</p>
<pre><code>...
</code></pre><p>}</p>
<h1 id="TableGenerator"><a href="#TableGenerator" class="headerlink" title="@TableGenerator"></a><strong>@TableGenerator</strong></h1><p>如果使用 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#GeneratedValue" target="_blank" rel="external">@GeneratedValue</a>批注指定一个 TABLE 类型的主键生成器，可以使用 @TableGenerator 批注微调该主键生成器以：</p>
<p>·   由于名称难于处理、是一个保留字、与预先存在的数据模型不兼容或作为数据库中的表名无效而更改主键生成器的表名称</p>
<p>·   更改分配大小以匹配应用程序要求或数据库性能参数</p>
<p>·   更改初始值以匹配现有的数据模型（例如，如果基于已经为其分配或保留了一组主键值的现有数据集构建）</p>
<p>·   使用特定目录或模式配置主键生成器的表</p>
<p>·   在主键生成器表的一列或多列商配置一个唯一的约束</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJDBGJ" target="_blank" rel="external">表 1-46</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/TableGenerator.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-46 @TableGenerator 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>SequenceGenerator 的名称必须匹配其 startegy 设置为 startegy 的 GeneratedValue 的名称。生成器名称的作用域对持续性单元是全局的（跨所有生成器类型）。</td>
</tr>
<tr>
<td>allocationSize</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值： 50.  默认情况下，JPA 持续性提供程序使用的分配大小为 50。  如果此分配大小与应用程序要求或数据库性能参数不匹配，请将  allocationSize 设置为所需的 int 值。</td>
</tr>
<tr>
<td>catalog</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序使用任何适用于数据库的默认目录。  如果默认目录不适合于应用程序，请将  catalog 设置为要使用的 String 目录名。</td>
</tr>
<tr>
<td>initialValue</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值： 0.  默认情况下，JPA 持续性提供程序将所有主键值的起始值设置为 0。  如果这与现有数据模型不匹配，请将  initialValue 设置为所需的 int 值。</td>
</tr>
<tr>
<td>pkColumnName</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序为生成器表中的主键列提供名称。  如果该名称不适合于应用程序，请将  pkColumnName 设置为所需的 String 名称。</td>
</tr>
<tr>
<td>pkColumnValue</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序为生成器表中的主键列提供一个合适的主键值。  如果该值不适合于应用程序，请将  pkColumnValue 设置为所需的 String 值。</td>
</tr>
<tr>
<td>schema</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序使用任何适用于数据库的默认模式。  如果默认模式不适合于应用程序，请将  schema 设置为要使用的 String 模式名。</td>
</tr>
<tr>
<td>table</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序为存储生成的 ID 值的表提供了一个合适的名称。  如果默认表名不适合于应用程序，请将  table 设置为所需的 String 表名。</td>
</tr>
<tr>
<td>uniqueConstraints</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序假设主键生成器表中的任何列均没有唯一约束。  如果唯一约束应用于该表中的一列或多列，则将  uniqueContraints 设置为一个或多个 UniqueConstraint 实例的数组。有关详细信息，请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#UniqueConstraint" target="_blank" rel="external">@UniqueConstraint</a>。</td>
</tr>
<tr>
<td>valueColumnName</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序为存储生成的 ID 值的列提供了一个合适的名称。  如果默认列名不适合于应用程序，请将  valueColumnName 设置为所需的 String 列名。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCIBFC" target="_blank" rel="external">示例 1-87</a> 显示了如何使用此批注为名为 empGen 的 TABLE 主键生成器指定分配大小。</p>
<p>示例 1-87 @TableGenerator</p>
<p>@Entity</p>
<p>public class Employee implements Serializable {</p>
<pre><code>...
</code></pre><p>@Id</p>
<p>@TableGenerator(</p>
<p>name=”empGen”,</p>
<p>allocationSize=1</p>
<pre><code>)
</code></pre><p>@GeneratedValue(strategy=TABLE,generator=”empGen”)</p>
<p>@Column(name=”CUST_ID”)</p>
<p>public Long getId() { </p>
<p>return id; </p>
<pre><code>}

...
</code></pre><h1 id="Temporal"><a href="#Temporal" class="headerlink" title="@Temporal"></a><strong>@Temporal</strong></h1><p>使用 @Temporal 批注指定 JPA 持续性提供程序应只为 java.util.Date 和 java.util.Calendar 类型的字段或属性持久保存的数据库类型。</p>
<p>该批注可以与 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Basic" target="_blank" rel="external">@Basic</a>一起使用。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFIAEE" target="_blank" rel="external">表 1-14</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Temporal.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-47 @Temporal 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>value</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>将 value 设置为与希望 JPA 持续性提供程序使用的数据库类型相对应的 TemporalType：     DATE - 等于 java.sql.Date   TIME - 等于 java.sql.Time   TIMESTAMP - 等于 java.sql.Timestamp</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBJJCD" target="_blank" rel="external">示例 1-88</a> 显示了如何使用此批注指定 JPA 持续性提供程序应将 java.util.Date 字段 startDate 持久保存为 DATE (java.sql.Date) 数据库类型。</p>
<p>示例 1-88 @Temporal</p>
<p>@Entity</p>
<p>public class Employee {</p>
<pre><code>...
</code></pre><p>@Temporal(DATE)   protected java.util.Date startDate;</p>
<pre><code>...
</code></pre><p>}</p>
<h1 id="Transient"><a href="#Transient" class="headerlink" title="@Transient"></a><strong>@Transient</strong></h1><p>默认情况下，JPA 持续性提供程序假设实体的所有字段均为持久字段。</p>
<p>使用 @Transient 批注指定实体的非持久字段或属性，例如，一个在运行时使用但并非实体状态一部分的字段或属性。</p>
<p>JPA 持续性提供程序不会对批注为 @Transient 的属性或字段持久保存（或创建数据库模式）。</p>
<p>该批注可以与 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Entity" target="_blank" rel="external">@Entity</a>、<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MappedSuperclass" target="_blank" rel="external">@MappedSuperclass</a>和 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Embeddable" target="_blank" rel="external">@Embeddable</a>一起使用。</p>
<p>该批注没有属性。有关更多详细信息，请参阅<a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Transient.html" target="_blank" rel="external">API</a>。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIHFCF" target="_blank" rel="external">示例 1-89</a> 显示了如何使用此批注将 Employee 字段 currentSession 指定为非持久字段。JPA 持续性提供程序将不持久保存该字段。</p>
<p>示例 1-89 @Transient</p>
<p>@Entitypublic class Employee {    @Id int id;    @Transient Session currentSession;    …}</p>
<h1 id="UniqueConstraint"><a href="#UniqueConstraint" class="headerlink" title="@UniqueConstraint"></a><strong>@UniqueConstraint</strong></h1><p>默认情况下，JPA 持续性提供程序假设所有列均可以包含重复值。</p>
<p>使用 @UniqueConstraint 批注指定将在为主表或辅助表生成的 DDL 中包含一个唯一约束。或者，您可以在列级别指定唯一约束（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Column" target="_blank" rel="external">@Column</a>）。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFDEEA" target="_blank" rel="external">表 1-48</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/UniqueConstraint.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-48 @UniqueConstraint 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>columnNames</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>如果任何列均包含唯一约束，请将  columnNames 设置为 String 列名的数组。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDBCAF" target="_blank" rel="external">示例 1-90</a> 显示了如何使用此批注对主表 EMP 中的列 EMP_ID 和 EMP_NAME 指定一个唯一约束。</p>
<p>示例 1-90 使用唯一约束的 @Table</p>
<p>@Entity</p>
<p>@Table(</p>
<p>name=”EMP”,</p>
<p>uniqueConstraints={@UniqueConstraint(columnNames={“EMP_ID”,”EMP_NAME”})}</p>
<p>)</p>
<p>public class Employee implements Serializable {</p>
<pre><code>...
</code></pre><p>}</p>
<h1 id="Version"><a href="#Version" class="headerlink" title="@Version"></a><strong>@Version</strong></h1><p>默认情况下，JPA 持续性提供程序假设应用程序负责数据一致性。</p>
<p>使用 @Version 批注通过指定用作其乐观锁定值的实体类的版本字段或属性来启用 JPA 管理的乐观锁定（推荐做法）。</p>
<p>选择版本字段或属性时，确保：</p>
<p>·   每个实体只有一个版本字段或属性</p>
<p>·   选择一个持久保存到主表的属性或字段（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Table" target="_blank" rel="external">@Table</a>）</p>
<p>·   您的应用程序不修改版本属性或字段</p>
<p>此批注没有属性。有关更多详细信息，请参阅<a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Version.html" target="_blank" rel="external">API</a>。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCIBDJ" target="_blank" rel="external">示例 1-91</a> 显示了如何使用此批注将属性 getVersionNum 指定为乐观锁定值。在该示例中，该属性的列名设置为 OPTLOCK（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Column" target="_blank" rel="external">@Column</a>），而非属性的默认列名。</p>
<p>示例 1-91 @Version</p>
<p>@Entity</p>
<p>public class Employee implements Serializable {</p>
<pre><code>...
</code></pre><p>@Version</p>
<p>@Column(name=”OPTLOCK”)</p>
<p>protected int getVersionNum() { </p>
<p>return versionNum; </p>
<pre><code>}

...
</code></pre><p>}</p>
<h1 id="Column"><a href="#Column" class="headerlink" title="@Column"></a><strong>@Column</strong></h1><p>默认情况下，JPA 持续性提供程序假设每个实体的持久字段存储在其名称与持久字段的名称相匹配的数据库表列中。</p>
<p>使用 @Column 批注：</p>
<ul>
<li>将持久字段与其他名称关联（如果默认列名难于处理、与事先存在的数据模型不兼容或作为数据库中的列名无效）</li>
<li>将持久字段与辅助表中的列关联（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SecondaryTable" target="_blank" rel="external">@SecondaryTable</a>）</li>
<li>微调数据库中列的特征</li>
</ul>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBAHAG" target="_blank" rel="external">表 1-7</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Column.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-7 @Column 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>columnDefinition</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：空 String。  默认情况下，JPA 使用最少量 SQL 创建一个数据库表列。  如果需要使用更多指定选项创建的列，请将  columnDefinition 设置为在针对列生成 DDL 时希望 JPA 使用的 SQL 片断。  注意：捕获批注中的 DDL 信息时，某些 JPA 持续性提供程序可以在生成数据库模式时使用此 DDL。例如，请参阅<a href="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/toplink-jpa-extensions.html#Java2DBSchemaGen" target="_blank" rel="external">“用于 Java2DB 模式生成的 TopLink JPA 扩展”</a>。</td>
</tr>
<tr>
<td>insertable</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：true。  默认情况下，JPA 持续性提供程序假设所有列始终包含在 SQL INSERT 语句中。  如果该列不应包含在这些语句中，请将  insertable 设置为 false。</td>
</tr>
<tr>
<td>length</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值： 255  默认情况下，JPA 持续性提供程序假设所有列在用于保存 String 值时的最大长度为 255 个字符。  如果该列不适合于您的应用程序或数据库，请将  length 设置为适合于您的数据库列的 int 值。</td>
</tr>
<tr>
<td>name</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序假设实体的每个持久字段都存储在其名称与持久字段或属性的名称相匹配的数据库表列中。  要指定其他列名，请将  name 设置为所需的 String 列名。</td>
</tr>
<tr>
<td>nullable</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：true。  默认情况下，JPA 持续性提供程序假设允许所有列包含空值。  如果不允许该列包含空值，请将  nullable 设置为 false。</td>
</tr>
<tr>
<td>precision</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值： 0.  默认情况下，JPA 持续性提供程序假设所有列在用于保存十进制（精确数字）值时的精度为 0。  如果该精度不适合于您的应用程序或数据库，请将  precision 设置为相应的 int 精度。</td>
</tr>
<tr>
<td>scale</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值： 0.  默认情况下，JPA 持续性提供程序假设所有列在用于保存十进制（精确数字）值时的伸缩度为 0。  如果该伸缩度不适合于您的应用程序或数据库，请将  scale 设置为相应的 int 精度。</td>
</tr>
<tr>
<td>table</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序假设实体的所有持久字段都存储到一个其名称为实体名称的数据库表中（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Table" target="_blank" rel="external">@Table</a>）。  如果该列与辅助表关联（请参阅  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SecondaryTable" target="_blank" rel="external">@SecondaryTable</a>），请将  name 设置为相应辅助表名称的 String 名称，如<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCEHDA" target="_blank" rel="external">示例 1-8</a> 所示。</td>
</tr>
<tr>
<td>unique</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：false。  默认情况下，JPA 持续性提供程序假设允许所有列包含重复值。  如果不允许该列包含重复值，请将  unique 设置为 true。设置为 true 时，这相当于在表级别使用 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#UniqueConstraint" target="_blank" rel="external">@UniqueConstraint</a>。</td>
</tr>
<tr>
<td>updatable</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：true。  默认情况下，JPA 持续性提供程序假设列始终包含在 SQL UPDATE 语句中。  如果该列不应包含在这些语句中，请将  updatable 设置为 false。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCEHDA" target="_blank" rel="external">示例 1-8</a> 显示了如何使用此批注使 JPA 将 empId 持久保存到辅助表 EMP_HR 中的列 EMP_NUM。默认情况下，JPA 将 empName 持久保存到主表 Employee 中的列 empName。</p>
<p>示例 1-8 @Column</p>
<p>@Entity<br>@SecondaryTable(name=”EMP_HR”)<br>public class Employee implements Serializable {<br>    …<br>@Column(name=”EMP_NUM”, table=”EMP_HR”)<br>private Long empId;<br>private String empName;<br>    …<br>}</p>
<h1 id="ColumnResult"><a href="#ColumnResult" class="headerlink" title="@ColumnResult"></a><strong>@ColumnResult</strong></h1><p>执行 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedNativeQuery" target="_blank" rel="external">@NamedNativeQuery</a>时，它可以返回实体（包括不同类型的实体）、标量值或实体和标量值的组合。</p>
<p>使用 @ColumnResult 批注返回标量值。标量类型由您在 @ColumnResult 中标识的列类型确定。</p>
<p>有关详细信息，另请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EntityResult" target="_blank" rel="external">@EntityResult</a>、<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#FieldResult" target="_blank" rel="external">@FieldResult</a>和 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SqlResultSetMapping" target="_blank" rel="external">@SqlResultSetMapping</a>。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGAGFI" target="_blank" rel="external">表 1-8</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/ColumnResult.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-8 @ColumnResult 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>在原生 SQL 查询的 SELECT 语句中将 name 设置为列名的 String 等效形式。如果在 SELECT 中使用列别名（AS 语句），则将 name 设置为列别名。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDEGDDF" target="_blank" rel="external">示例 1-9</a> 显示了如何使用此批注将 Item（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIDFBJ" target="_blank" rel="external">示例 1-10</a>）标量 name 包含在结果列表（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIDIAI" target="_blank" rel="external">示例 1-11</a>）中。在该示例中，结果列表将为 Object 数组的 List，如：{[Order, “Shoes”],[Order, “Socks”], …}。</p>
<p>示例 1-9 使用 @ColumnResult 的 Order 实体</p>
<p>@SqlResultSetMapping(<br>name=”OrderResults”,<br>entities={<br>@EntityResult(<br>entityClass=Order.class,<br>fields={<br>@FieldResult(name=”id”,<br>column=”order_id”),<br>@FieldResult(name=”quantity”, column=”order_quantity”),<br>@FieldResult(name=”item”,<br>column=”order_item”)<br>            }<br>        )<br>    },<br>columns={<br>@ColumnResult(<br>name=”item_name”<br>        )<br>    }<br>)<br>@Entity<br>public class Order {<br>@Id<br>protected int id;<br>protected long quantity;<br>protected Item item;<br>    …<br>}</p>
<p>示例 1-10 Item 实体</p>
<p>@Entity<br>public class Item {<br>@Id<br>protected int id;<br>protected String name;<br>    …<br>}</p>
<p>示例 1-11 结合使用 @SqlResultSetMapping与 @ColumnResult 的原生查询</p>
<p>Query q = entityManager.createNativeQuery(<br>“SELECT o.id       AS order_id,<br>“ +<br>“o.quantity AS order_quantity, “ +<br>“o.item     AS order_item, “ +<br>“i.name     AS item_name, “ +<br>“FROM Order o, Item i “ +<br>“WHERE (order_quantity &gt; 25) AND (order_item = i.id)”,<br>“OrderResults”<br>);<br>List resultList = q.getResultList();<br>// List of Object arrays:{[Order, “Shoes”], [Order,<br>“Socks”], …}</p>
<h1 id="DiscriminatorColumn"><a href="#DiscriminatorColumn" class="headerlink" title="@DiscriminatorColumn"></a><strong>@DiscriminatorColumn</strong></h1><p>默认情况下，当 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Inheritance" target="_blank" rel="external">@Inheritance</a>属性策略为 InheritanceType.SINGLE_TABLE 或 JOINED 时，JPA 持续性提供程序将创建一个名为 DTYPE 的标识符列以区分继承层次中的类。</p>
<p>使用 @DiscriminatorColumn 批注：</p>
<ul>
<li>指定一个标识符列名（如果数据模型中的列名不是默认列名 DTYPE）。</li>
<li>指定一个适用于应用程序或事先存在的数据模型的标识符列长度</li>
<li>微调数据库中的标识符列的特征</li>
</ul>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGDIEG" target="_blank" rel="external">表 1-9</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/DiscriminatorColumn.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-9 @DiscriminatorColumn 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>columnDefinition</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：空 String。  默认情况下，JPA 持续性提供程序使用最少量 SQL 创建一个数据库表列。  如果需要使用更多指定选项创建的列，请将  columnDefinition 设置为在针对列生成 DDL 时希望 JPA 使用的 SQL 片断。</td>
</tr>
<tr>
<td>discriminatorType</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：DiscriminatorType.STRING。  默认情况下，JPA 持续性提供程序假设标识符类型为 String。  如果要使用其他类型，请将  discriminatorType 设置为 DiscriminatorType.CHAR 或 DiscriminatorType.INTEGER。  您的 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorValue" target="_blank" rel="external">@DiscriminatorValue</a>  必须符合此类型。</td>
</tr>
<tr>
<td>length</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值： 31  默认情况下，JPA 持续性提供程序假设标识符列在用于保存 String 值时的最大长度为 255 个字符。  如果该列不适合于您的应用程序或数据库，请将  length 设置为适合于您的数据库列的 int 值。  您的 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorValue" target="_blank" rel="external">@DiscriminatorValue</a>  必须符合此长度。</td>
</tr>
<tr>
<td>name</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序假设标识符列名为“DTYPE”。  要指定其他列名，请将  name 设置为所需的 String 列名。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFJAHI" target="_blank" rel="external">示例 1-12</a> 显示了如何使用此批注指定一个名为 DISC、类型为 STRING、长度为 20 的标识符列。在本示例中，该类的 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorValue" target="_blank" rel="external">@DiscriminatorValue</a>指定为 CUST。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDEFCAC" target="_blank" rel="external">示例 1-13</a> 中的子类将它自己的 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorValue" target="_blank" rel="external">@DiscriminatorValue</a>指定为 VIP。在 Customer 和 ValuedCustomer 中，<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorValue" target="_blank" rel="external">@DiscriminatorValue</a>的值必须可以转换为由 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorColumn" target="_blank" rel="external">@DiscriminatorColumn</a>属性 discriminatorType 指定的类型，并且必须符合 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorColumn" target="_blank" rel="external">@DiscriminatorColumn</a>属性 length。</p>
<p>示例 1-12 @DiscriminatorColumn 和@DiscriminatorValue — 根类</p>
<p>@Entity<br>@Table(name=”CUST”)<br>@Inheritance(strategy=SINGLE_TABLE)<br>@DiscriminatorColumn(name=”DISC”, discriminatorType=STRING,<br>length=20)<br>@DiscriminatorValue(value-“CUST”)<br>public class Customer {<br>    …<br>}</p>
<p>示例 1-13 @DiscriminatorValue — 子类</p>
<p>@Entity<br>@DiscriminatorValue(value=”VIP”)<br>public class ValuedCustomer extends Customer {<br>    …<br>}</p>
<h1 id="DiscriminatorValue"><a href="#DiscriminatorValue" class="headerlink" title="@DiscriminatorValue"></a><strong>@DiscriminatorValue</strong></h1><p>默认情况下，当 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Inheritance" target="_blank" rel="external">@Inheritance</a>属性策略为 InheritanceType.SINGLE_TABLE 或 JOINED 时，JPA 持续性提供程序使用 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorColumn" target="_blank" rel="external">@DiscriminatorColumn</a>按实体名称区分继承层次中的类（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Entity" target="_blank" rel="external">@Entity</a>）。</p>
<p>使用 @DiscriminatorValue 批注指定用于区分此继承层次中的实体的标识符值：</p>
<ul>
<li>如果实体名称不适合于此应用程序</li>
<li>匹配现有的数据库模式</li>
</ul>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDIEHH" target="_blank" rel="external">表 1-10</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/DiscriminatorValue.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-10 @DiscriminatorValue 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>value</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>将 value 设置为符合 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorColumn" target="_blank" rel="external">@DiscriminatorColumn</a>  属性 discriminatorType 和 length 的标识符值的 String 等效形式。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIDEIC" target="_blank" rel="external">示例 1-14</a> 显示了如何使用此批注指定一个名为 DISC、类型为 STRING、长度为 20 的标识符列。在本示例中，该类的 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorValue" target="_blank" rel="external">@DiscriminatorValue</a>指定为 CUST。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJICCD" target="_blank" rel="external">示例 1-15</a> 中的子类将它自己的 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorValue" target="_blank" rel="external">@DiscriminatorValue</a>指定为 VIP。在 Customer 和 ValuedCustomer 中，<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorValue" target="_blank" rel="external">@DiscriminatorValue</a>的值必须可以转换为由 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorColumn" target="_blank" rel="external">@DiscriminatorColumn</a>属性 discriminatorType 指定的类型，并且必须符合 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorColumn" target="_blank" rel="external">@DiscriminatorColumn</a>属性 length。</p>
<p>示例 1-14 @DiscriminatorColumn 和@DiscriminatorValue — 根类</p>
<p>@Entity<br>@Table(name=”CUST”)<br>@Inheritance(strategy=SINGLE_TABLE)<br>@DiscriminatorColumn(name=”DISC”, discriminatorType=STRING,<br>length=20)<br>@DiscriminatorValue(value-“CUST”)<br>public class Customer {<br>    …<br>}</p>
<p>示例 1-15 @DiscriminatorValue — 子类</p>
<p>@Entity<br>@DiscriminatorValue(value=”VIP”)<br>public class ValuedCustomer extends Customer {<br>    …<br>}</p>
<h1 id="Embeddable"><a href="#Embeddable" class="headerlink" title="@Embeddable"></a><strong>@Embeddable</strong></h1><p>默认情况下，JPA 持续性提供程序假设每个实体均持久保存到它自己的数据库表。</p>
<p>使用 @Embeddable 批注指定一个类，该类的实例存储为拥有实体的固有部分并共享该实体的身份。嵌入对象的每个持久属性或字段都将映射到实体的数据库表。</p>
<p>此批注没有属性。有关更多详细信息，请参阅<a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Embeddable.html" target="_blank" rel="external">API</a>。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIDJHG" target="_blank" rel="external">示例 1-16</a> 显示了如何使用此批注指定：类 EmploymentPeriod 在用作批注为 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Embedded" target="_blank" rel="external">@Embedded</a>的持久字段的类型时可以嵌套到实体中（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIFFDE" target="_blank" rel="external">示例 1-17</a>）</p>
<p>示例 1-16 @Embeddable</p>
<p>@Embeddable<br>public class EmploymentPeriod {<br>java.util.Date startDate;<br>java.util.Date endDate;<br>    …<br>}</p>
<h1 id="Embedded"><a href="#Embedded" class="headerlink" title="@Embedded"></a><strong>@Embedded</strong></h1><p>默认情况下，JPA 持续性提供程序假设每个实体均持久保存到它自己的数据库表。</p>
<p>使用 @Embedded 批注指定一个持久字段，该字段的 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Embeddable" target="_blank" rel="external">@Embeddable</a>类型可以存储为拥有实体的固有部分，并共享该实体的身份。嵌入对象的每个持久属性或字段均映射到拥有实体的数据库表。</p>
<p>可以结合使用 @Embedded 和 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Embeddable" target="_blank" rel="external">@Embeddable</a>以建立严格所有权关系的模型，以便在删除了拥有对象的情况下还将删除被拥有的对象。</p>
<p>嵌入的对象不应映射到多个表。</p>
<p>默认情况下，<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIDJHG" target="_blank" rel="external">@Embeddable</a>类中指定的列定义（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCEHDA" target="_blank" rel="external">@Column</a>）适用于@Embedded 类。如果要覆盖这些列定义，请使用 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AttributeOverride" target="_blank" rel="external">@AttributeOverride</a>。</p>
<p>此批注没有属性。有关更多详细信息，请参阅<a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Embedded.html" target="_blank" rel="external">API</a>。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIFFDE" target="_blank" rel="external">示例 1-17</a> 显示了如何使用该批注指定：<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Embeddable" target="_blank" rel="external">@Embeddable</a>类 EmploymentPeriod（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIDJHG" target="_blank" rel="external">示例 1-16</a>）可以使用指定的属性覆盖（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AttributeOverride" target="_blank" rel="external">@AttributeOverride</a>）嵌入到实体类中。如果不需要属性覆盖，则可以完全忽略@Embedded 批注：JPA 持续性提供程序将推断出 EmploymentPeriod 是从它的 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Embeddable" target="_blank" rel="external">@Embeddable</a>批注进行嵌套。</p>
<p>示例 1-17 @Embedded</p>
<p>@Entity<br>public class Employee implements Serializable {<br>    …<br>@Embedded<br>@AttributeOverrides({<br>@AttributeOverride(name=”startDate”,<br>column=@Column(“EMP_START”)),<br>@AttributeOverride(name=”endDate”,<br>column=@Column(“EMP_END”))<br>    )<br>public EmploymentPeriod getEmploymentPeriod() {<br>        …<br>    }<br>    …<br>}</p>
<h1 id="EmbeddedId"><a href="#EmbeddedId" class="headerlink" title="@EmbeddedId"></a><strong>@EmbeddedId</strong></h1><p>使用 @EmbeddedId 批注指定一个由实体拥有的可嵌入复合主键类（通常由两个或更多基元类型或 JDK 对象类型组成）。从原有数据库映射时（此时数据库键由多列组成），通常将出现复合主键。</p>
<p>复合主键类具有下列特征：</p>
<ul>
<li>它是一个普通的旧式     Java 对象 (POJO) 类。</li>
<li>它必须为 public，并且必须有一个 public 无参数构造函数。</li>
<li>如果使用基于属性的访问，则主键类的属性必须为 public 或 protected。</li>
<li>它必须是可序列化的。</li>
<li>它必须定义 equals 和 hashCode 方法。</li>
</ul>
<p>这些方法的值相等性的语义必须与键映射到的数据库类型的数据库相等性一致。</p>
<p>或者，您可以使复合主键类成为非嵌入类（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#IdClass" target="_blank" rel="external">@IdClass</a>）。</p>
<p>此批注没有属性。有关更多详细信息，请参阅<a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/EmbeddedId.html" target="_blank" rel="external">API</a>。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CEGCJDJF" target="_blank" rel="external">示例 1-18</a> 显示了一个批注为 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Embeddable" target="_blank" rel="external">@Embeddable</a>的典型复合主键类。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CEGBCBEF" target="_blank" rel="external">示例1-19</a> 显示了如何使用可嵌入的复合主键类（使用@EmbeddedId 批注）配置一个实体。</p>
<p>示例 1-18 可嵌入复合主键类</p>
<p>@Embeddable<br>public class EmployeePK implements Serializable<br>{<br>private String name;<br>private long id;<br>public EmployeePK()<br>    {<br>    }<br>public String getName()<br>    {<br>return name;<br>    }<br>public void setName(String name)<br>    {<br>this.name = name;<br>    }<br>public long getId()<br>    {<br>return id;<br>    }<br>public void setId(long id)<br>    {<br>this.id = id;<br>    }<br>public int hashCode()<br>    {<br>return (int) name.hashCode() + id;<br>    }<br>public boolean equals(Object obj)<br>    {<br>if (obj == this) return true;<br>if (!(obj instanceof EmployeePK)) return false;<br>if (obj == null) return false;<br>EmployeePK pk = (EmployeePK) obj;<br>return pk.id == id &amp;&amp; pk.name.equals(name);<br>    }<br>}</p>
<p>示例 1-19 @EmbeddedId</p>
<p>@Entity<br>public class Employee implements Serializable<br>{<br>EmployeePK primaryKey;<br>public Employee()<br>    {<br>    }<br>@EmbeddedId<br>public EmployeePK getPrimaryKey()<br>    {<br>return primaryKey;<br>    }<br>public void setPrimaryKey(EmployeePK pk)<br>    {<br>primaryKey = pk;<br>    }<br>    …<br>}</p>
<h1 id="Entity"><a href="#Entity" class="headerlink" title="@Entity"></a><strong>@Entity</strong></h1><p>使用 @Entity 批注将普通的旧式 Java 对象 (POJO) 类指定为实体，并使其可用于 JPA 服务。必须将 POJO 类指定为实体，然后才可以使用任何其他 JPA 批注。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJBGAB" target="_blank" rel="external">表 1-11</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Entity.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-11 @Entity 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序假设实体名称是实体类的名称。在<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDHIDBI" target="_blank" rel="external">示例 1-20</a> 中，默认 name 为“Employee”。  如果实体类名难于处理、是一个保留字、与事先存在的数据模型不兼容或作为数据库中的表名无效，请将  name 设置为其他 String 值。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDHIDBI" target="_blank" rel="external">示例 1-20</a> 显示了该批注的用法。</p>
<p>示例 1-20 @Entity</p>
<p>@Entity<br>public class Employee implements Serializable {<br>    …<br>}</p>
<h1 id="EntityListeners"><a href="#EntityListeners" class="headerlink" title="@EntityListeners"></a><strong>@EntityListeners</strong></h1><p>可以使用生命周期批注（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#LifecycleAnnotations" target="_blank" rel="external">生命周期事件批注</a>）指定实体中的方法，这些方法在指定的生命周期事件发生时执行您的逻辑。</p>
<p>使用 @EntityListeners 批注将一个或多个实体监听程序类与 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Entity" target="_blank" rel="external">@Entity</a>或 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MappedSuperclass" target="_blank" rel="external">@MappedSuperclass</a>关联，条件是您需要在指定的生命周期事件发生时执行逻辑，以及：</p>
<ul>
<li>不希望在实体 API 中公开生命周期监听程序方法。</li>
<li>要在不同的实体类型之间共享生命周期监听程序逻辑。</li>
</ul>
<p>当实体或子类上发生生命周期事件时，JPA 持续性提供程序将按监听程序定义的顺序通知每个实体监听程序，并调用使用相应的生命周期事件类型进行批注的实体监听程序方法（如果有）。</p>
<p>实体监听程序类具有以下特征：</p>
<ul>
<li>它是一个普通的旧式     Java 对象 (POJO) 类</li>
<li>它有一个或多个具有以下签名的回调方法：</li>
</ul>
<p>public void <methodname>(Object)</methodname></p>
<p>可以指定参数类型 Object，或实体监听程序将与其关联的实体类的类型。</p>
<ul>
<li>它用一个或多个生命周期事件批注对每个回调方法进行批注。</li>
</ul>
<p>一个生命周期事件只能与一个回调监听程序方法关联，但某个给定的回调监听程序方法可以与多个生命周期事件关联。</p>
<p>如果使用实体监听程序，则可以管理哪些实体监听程序使用<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ExcludeDefaultListeners" target="_blank" rel="external">@ExcludeDefaultListeners</a>和 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ExcludeSuperclassListeners" target="_blank" rel="external">@ExcludeSuperclassListeners</a>调用。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJJFJC" target="_blank" rel="external">表 1-12</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/EntityListeners.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-12 @EntityListeners 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>value</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>要为 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Entity" target="_blank" rel="external">@Entity</a>  或 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MappedSuperclass" target="_blank" rel="external">@MappedSuperclass</a>  指定实体监听程序类的列表，请将 value 设置为实体监听程序类的 Class 数组。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJBJAG" target="_blank" rel="external">示例 1-21</a> 显示了如何使用此批注将实体监听程序类 EmployeePersistListener（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCHCII" target="_blank" rel="external">示例 1-22</a>）和 EmployeeRemoveListener（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDHDGAD" target="_blank" rel="external">示例 1-23</a>）与实体 Employee 关联。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDHDGAD" target="_blank" rel="external">示例 1-23</a> 显示了您可以将多个生命周期事件与给定的实体监听程序类方法关联，但任何给定的生命周期事件只能在实体监听程序类中出现一次。</p>
<p>示例 1-21 @EntityListeners</p>
<p>@Entity<br>@EntityListeners(value={EmployeePersistListner.class,<br>EmployeeRemoveListener.class})<br>public class Employee implements Serializable {<br>    …<br>}</p>
<p>示例 1-22 EmployeePersistListener</p>
<p>public class EmployeePersistListener {<br>@PrePersist<br>employeePrePersist(Object employee) {<br>    …<br>    }<br>    …<br>}</p>
<p>示例 1-23 EmployeeRemoveListener</p>
<p>public class EmployeeRemoveListener {<br>@PreRemove<br>@PostRemove<br>employeePreRemove(Object employee) {<br>    …<br>    }<br>    …<br>}</p>
<h1 id="EntityResult"><a href="#EntityResult" class="headerlink" title="@EntityResult"></a><strong>@EntityResult</strong></h1><p>执行 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedNativeQuery" target="_blank" rel="external">@NamedNativeQuery</a>时，它可以返回实体（包括不同类型的实体）、标量值或实体和标量值的组合。</p>
<p>使用 @EntityResult 批注返回实体。</p>
<p>有关详细信息，另请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ColumnResult" target="_blank" rel="external">@ColumnResult</a>、<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#FieldResult" target="_blank" rel="external">@FieldResult</a>和 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SqlResultSetMapping" target="_blank" rel="external">@SqlResultSetMapping</a>。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGAGFI" target="_blank" rel="external">表 1-8</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/EntityResult.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-13 @EntityResult 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>entityClass</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>将 entityClass 设置为由 SELECT 语句返回的实体的 Class。</td>
</tr>
<tr>
<td>discriminatorColumn</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：空 String。  默认情况下，JPA 持续性提供程序假设 SELECT 语句中不包含标识符列（请参阅  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Inheritance" target="_blank" rel="external">@Inheritance</a>）。  如果在 SELECT 语句中使用标识符列，请将 discriminatorColumn 设置为所使用的 String 列名。</td>
</tr>
<tr>
<td>fields</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：空 FieldResult 数组。  默认情况下，JPA 持续性提供程序假设 SELECT 语句包含与返回的实体的所有字段或属性相对应的所有列，且  SELECT 语句中的列名对应于字段或属性名（未使用 AS 语句）。  如果 SELECT 语句只包含某些与返回的实体的字段或属性相对应的列，或 SELECT 语句中的列名并不对应于字段或属性名（使用了  AS 语句），请将 fields 设置为 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#FieldResult" target="_blank" rel="external">@FieldResult</a>  的数组，SELECT 语句中的每一列一个 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#FieldResult" target="_blank" rel="external">@FieldResult</a>。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDHGEGE" target="_blank" rel="external">示例 1-24</a> 显示了如何使用此批注将 Order 和 Item（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDHAJBB" target="_blank" rel="external">示例 1-25</a>）实体包含在结果列表（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDDHDC" target="_blank" rel="external">示例 1-26</a>）中。在该示例中，结果列表将为 Object 数组的 List，如：{[Order, Item], [Order, Item],…}。</p>
<p>示例 1-24 使用 @EntityResult 的 Order 实体</p>
<p>@SqlResultSetMapping(<br>name=”OrderResults”,<br>entities={<br>@EntityResult(<br>entityClass=Order.class,<br>fields={<br>@FieldResult(name=”id”,<br>column=”order_id”),<br>@FieldResult(name=”quantity”, column=”order_quantity”),<br>@FieldResult(name=”item”,<br>column=”order_item”)<br>            }<br>        ),<br>@EntityResult(<br>entityClass=Item.class,<br>fields={<br>@FieldResult(name=”id”,<br>column=”item_id”),<br>@FieldResult(name=”name”,<br>column=”item_name”),<br>            }<br>        )<br>    }<br>)<br>@Entity<br>public class Order {<br>@Id<br>protected int id;<br>protected long quantity;<br>protected Item item;<br>    …<br>}</p>
<p>示例 1-25 Item 实体</p>
<p>@Entity<br>public class Item {<br>@Id<br>protected int id;<br>protected String name;<br>    …<br>}</p>
<p>示例 1-26 结合使用 @SqlResultSetMapping与 @EntityResult 的原生查询</p>
<p>Query q = entityManager.createNativeQuery(<br>“SELECT o.id       AS order_id,<br>“ +<br>“o.quantity AS order_quantity, “ +<br>“o.item     AS order_item, “ +<br>“i.id       AS item_id, “ +<br>“i.name     AS item_name, “ +<br>“FROM Order o, Item i “ +<br>“WHERE (order_quantity &gt; 25) AND (order_item = i.id)”,<br>“OrderResults”<br>);<br>List resultList = q.getResultList();<br>// List of Object arrays:{[Order, Item], [Order, Item], …}</p>
<h1 id="Enumerated"><a href="#Enumerated" class="headerlink" title="@Enumerated"></a><strong>@Enumerated</strong></h1><p>默认情况下，JPA 持续性提供程序持久保存枚举常量的序数值。</p>
<p>使用 @Enumerated 批注指定在 String 值适合应用程序要求或与现有数据库模式匹配的情况下，JPA 持续性提供程序是否应持久保存枚举常量的序数值或 String 值。</p>
<p>该批注可以与 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Basic" target="_blank" rel="external">@Basic</a>一起使用。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFIAEE" target="_blank" rel="external">表 1-14</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Enumerated.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-14 @Enumerated 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>value</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：EnumType.ORDINAL。  默认情况下，JPA 持续性提供程序假设对于映射到枚举常量的属性或字段，应持久保存序数值。在<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDEJBHG" target="_blank" rel="external">示例 1-28</a> 中，当持久保存 Employee 时，EmployeeStatus 的序数值将写入数据库。  如果需要持久保存的枚举常量的 String 值，请将 value 设置为 EnumType.STRING。</td>
</tr>
</tbody>
</table>
<p>根据<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDEJJFC" target="_blank" rel="external">示例 1-27</a> 中的枚举常量，<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDEJBHG" target="_blank" rel="external">示例 1-28</a> 显示了如何使用此批注指定在持久保存 Employee 时应将 SalaryRate 的 String 值写入数据库。默认情况下，会将 EmployeeStatus 的序数值写入数据库。</p>
<p>示例 1-27 枚举常量</p>
<p>public enum EmployeeStatus {FULL_TIME, PART_TIME,<br>CONTRACT}<br>public enum SalaryRate {JUNIOR, SENIOR, MANAGER, EXECUTIVE}</p>
<p>示例 1-28 @Enumerated</p>
<p>@Entity<br>public class Employee {<br>    …<br>public EmployeeStatus getStatus() {<br>    …<br>    }<br>@Enumerated(STRING)<br>public SalaryRate getPayScale() {<br>    …<br>    }<br>    …<br>}</p>
<h1 id="ExcludeDefaultListeners"><a href="#ExcludeDefaultListeners" class="headerlink" title="@ExcludeDefaultListeners"></a><strong>@ExcludeDefaultListeners</strong></h1><p>默认监听程序是 orm.xml 文件中指定的一个生命周期事件监听程序类，该类应用于持续性单元（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceUnit" target="_blank" rel="external">@PersistenceUnit</a>）中的所有实体。在调用任何其他实体监听程序（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EntityListeners" target="_blank" rel="external">@EntityListeners</a>）之前，JPA 持续性提供程序首先按照 orm.xml 文件中定义的顺序调用默认监听程序（如果有）。</p>
<p>如果默认监听程序行为不适用，请使用 @ExcludeDefaultListeners 批注覆盖（并阻止）针对给定 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Entity" target="_blank" rel="external">@Entity</a>或 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MappedSuperclass" target="_blank" rel="external">@MappedSuperclass</a>执行的默认监听程序。</p>
<p>此批注没有属性。有关更多详细信息，请参阅<a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/ExcludeDefaultListeners.html" target="_blank" rel="external">API</a>。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCGBHG" target="_blank" rel="external">示例 1-29</a> 显示了如何使用此批注指定不应对 Employee 实体执行默认监听程序。</p>
<p>示例 1-29 @ExcludeDefaultListeners</p>
<p>@Entity<br>@ExcludeDefaultListeners<br>public class Employee implements Serializable {<br>    …<br>}</p>
<h1 id="ExcludeSuperclassListeners"><a href="#ExcludeSuperclassListeners" class="headerlink" title="@ExcludeSuperclassListeners"></a><strong>@ExcludeSuperclassListeners</strong></h1><p>如果继承层次中的 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Entity" target="_blank" rel="external">@Entity</a>和 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MappedSuperclass" target="_blank" rel="external">@MappedSuperclass</a>类定义了 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EntityListeners" target="_blank" rel="external">@EntityListeners</a>，则默认情况下，JPA 持续性提供程序将在调用子类监听程序之前调用超类监听程序。</p>
<p>如果超类监听程序行为不适用，则使用 @ExcludeSuperclassListeners 批注覆盖（并阻止）针对给定 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Entity" target="_blank" rel="external">@Entity</a>或 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MappedSuperclass" target="_blank" rel="external">@MappedSuperclass</a>执行的超类监听程序。</p>
<p>@ExcludeSuperclassListeners 批注不影响默认监听程序（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ExcludeDefaultListeners" target="_blank" rel="external">@ExcludeDefaultListeners</a>）。</p>
<p>此批注没有属性。有关更多详细信息，请参阅<a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/ExcludeSuperclassListeners.html" target="_blank" rel="external">API</a>。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCGBHG" target="_blank" rel="external">示例 1-29</a> 显示了如何使用此批注指定不应对 PartTimeEmployee 实体执行超类监听程序 EmployeeListener，而是执行默认监听程序和子类监听程序PartTimeEmployeeListener1 和 PartTimeEmployeeListener2。</p>
<p>示例 1-30 超类级别的实体监听程序</p>
<p>@MappedSuperclass<br>@EntityListeners(value={EmployeeListener.class})<br>public class Employee {<br>    …<br>}</p>
<p>示例 1-31 子类级别的@ExcludeSuperclassListeners</p>
<p>@Entity<br>@ExcludeSuperclassListeners<br>@EntityListners(value={PartTimeEmployeeListener1.class,<br>PartTimeEmployeeListener2.class})<br>public class PartTimeEmployee extends Employee {<br>    …<br>}</p>
<h1 id="FieldResult"><a href="#FieldResult" class="headerlink" title="@FieldResult"></a><strong>@FieldResult</strong></h1><p>执行 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedNativeQuery" target="_blank" rel="external">@NamedNativeQuery</a>时，它可以返回实体（包括不同类型的实体）、标量值或实体和标量值的组合。</p>
<p>默认情况下，JPA 持续性提供程序假设在使用 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EntityResult" target="_blank" rel="external">@EntityResult</a>返回实体时，SELECT 语句将包含与返回的实体的所有字段或属性相对应的所有列，且 SELECT 语句中的列名对应于字段或属性名（未使用 AS 语句）。</p>
<p>如果 SELECT 语句只包含某些与返回的实体的字段或属性相对应的列，或 SELECT 语句中的列名并不对应于字段或属性名（使用了 AS 语句），则在使用 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EntityResult" target="_blank" rel="external">@EntityResult</a>返回实体时，请使用 @FieldResult 批注将 SELECT 语句中的列映射到字段或属性。</p>
<p>有关详细信息，另请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ColumnResult" target="_blank" rel="external">@ColumnResult</a>和 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SqlResultSetMapping" target="_blank" rel="external">@SqlResultSetMapping</a>。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIHEDC" target="_blank" rel="external">表 1-15</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/FieldResult.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-15 @FieldResult 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>column</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>将 column 设置为 SELECT 语句中使用的列的 String 名称。如果在 SELECT 中使用列别名（AS 语句），请将 column 设置为列别名。</td>
</tr>
<tr>
<td>name</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>将 name 设置为实体的字段或属性名（作为 String），该名称对应于 column 属性指定的列名。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFAFEB" target="_blank" rel="external">示例 1-32</a> 显示了如何使用此批注将 Order 和 Item（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJGDJI" target="_blank" rel="external">示例 1-33</a>）实体包含在结果列表（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDJCJC" target="_blank" rel="external">示例 1-34</a>）中。在该示例中，结果列表将为 Object 数组的 List，如：{[Order, Item], [Order, Item],…}。</p>
<p>示例 1-32 使用 @EntityResult 和 @FieldResult 的 Order 实体</p>
<p>@SqlResultSetMapping(<br>name=”OrderResults”,<br>entities={<br>@EntityResult(<br>entityClass=Order.class,<br>fields={<br>@FieldResult(name=”id”,<br>column=”order_id”),<br>@FieldResult(name=”quantity”, column=”order_quantity”),<br>@FieldResult(name=”item”,<br>column=”order_item”)<br>            }<br>        ),<br>@EntityResult(<br>entityClass=Item.class,<br>fields={<br>@FieldResult(name=”id”,<br>column=”item_id”),<br>@FieldResult(name=”name”,<br>column=”item_name”),<br>            }<br>        )<br>    }<br>)<br>@Entity<br>public class Order {<br>@Id<br>protected int id;<br>protected long quantity;<br>protected Item item;<br>    …<br>}</p>
<p>示例 1-33 Item 实体</p>
<p>@Entity<br>public class Item {<br>@Id<br>protected int id;<br>protected String name;<br>    …<br>}</p>
<p>示例 1-34 结合使用 @SqlResultSetMapping与 @EntityResult 的原生查询</p>
<p>Query q = entityManager.createNativeQuery(<br>“SELECT o.id       AS order_id,<br>“ +<br>“o.quantity AS order_quantity, “ +<br>“o.item     AS order_item, “ +<br>“i.id       AS item_id, “ +<br>“i.name     AS item_name, “ +<br>“FROM Order o, Item i “ +<br>“WHERE (order_quantity &gt; 25) AND (order_item = i.id)”,<br>“OrderResults”<br>);<br>List resultList = q.getResultList();<br>// List of Object arrays:{[Order, Item], [Order, Item], …}</p>
<h1 id="GeneratedValue"><a href="#GeneratedValue" class="headerlink" title="@GeneratedValue"></a><strong>@GeneratedValue</strong></h1><p>默认情况下，JPA 持续性提供程序管理为实体主键提供的唯一标识符（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Id" target="_blank" rel="external">@Id</a>）。</p>
<p>如果要微调此机制以实现以下目的，请使用@GeneratedValue 批注：</p>
<ul>
<li>如果您感觉另一个生成器类型更适合于数据库或应用，则覆盖持续性提供程序为数据库选择的身份值生成的类型</li>
<li>如果此名称难于处理、是一个保留字、与事先存在的数据模型不兼容或作为数据库中的主键生成器名称无效，则覆盖持续性提供程序选择的主键生成器名称</li>
</ul>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBJHED" target="_blank" rel="external">表 1-16</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/GeneratedValue.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-16 @GeneratedValue 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>generator</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序为它选择的主键生成器分配一个名称。  如果该名称难于处理、是一个保留字、与事先存在的数据模型不兼容或作为数据库中的主键生成器名称无效，则将  generator 设置为要使用的 String 生成器名称。</td>
</tr>
<tr>
<td>strategy</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：GenerationType.AUTO。  默认情况下，JPA 持续性提供程序选择最适合于基础数据库的主键生成器类型。  如果您感觉另一个生成器类型更适合于数据库或应用程序，请将  strategy 设置为所需的 GeneratorType：     IDENTITY — 指定持续性提供程序使用数据库身份列   AUTO — 指定持续性提供程序应选择一个最适合于基础数据库的主键生成器。   SEQUENCE — 指定持续性提供程序使用数据库序列（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SequenceGenerator" target="_blank" rel="external">@SequenceGenerator</a>）   TABLE — 指定持续性提供程序为使用基础数据库表的实体分配主键以确保唯一性（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#TableGenerator" target="_blank" rel="external">@TableGenerator</a>）</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJHFBJ" target="_blank" rel="external">示例 1-35</a> 显示了如何使用此批注指示持续性提供程序使用名为 CUST_SEQ、类型为 GeneratorType.SEQUENCE 的主键生成器。</p>
<p>示例 1-35 @GeneratedValue</p>
<p>@Entity<br>public class Employee implements Serializable {<br>    …<br>@Id<br>@GeneratedValue(strategy=SEQUENCE, generator=”CUST_SEQ”)<br>@Column(name=”CUST_ID”)<br>public Long getId() {<br>return id;<br>    }<br>    …<br>}</p>
<h1 id="Id"><a href="#Id" class="headerlink" title="@Id"></a><strong>@Id</strong></h1><p>使用 @Id 批注将一个或多个持久字段或属性指定为实体的主键。</p>
<p>对于每个实体，必须至少指定以下项之一：</p>
<ul>
<li>一个 @Id</li>
<li>多个 @Id 和一个 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#IdClass" target="_blank" rel="external">@IdClass</a>（对于复合主键）</li>
<li>一个 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EmbeddedId" target="_blank" rel="external">@EmbeddedId</a></li>
</ul>
<p>此批注没有属性。有关更多详细信息，请参阅<a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Id.html" target="_blank" rel="external">API</a>。</p>
<p>默认情况下，JPA 持续性提供程序选择最合适的主键生成器（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#GeneratedValue" target="_blank" rel="external">@GeneratedValue</a>）并负责管理主键值：您不必采取任何进一步的操作。如果要使用 JPA 持续性提供程序的默认键生成机制，则不必采取任何进一步的操作。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCEDIC" target="_blank" rel="external">示例 1-36</a> 显示了如何使用此批注将持久字段 empID 指定为 Employee 表的主键。</p>
<p>示例 1-36 @Id</p>
<p>@Entity<br>public class Employee implements Serializable {<br>@Id<br>private int empID;<br>    …<br>}</p>
<h1 id="IdClass"><a href="#IdClass" class="headerlink" title="@IdClass"></a><strong>@IdClass</strong></h1><p>使用 @IdClass 批注为实体指定一个复合主键类（通常由两个或更多基元类型或 JDK 对象类型组成）。从原有数据库映射时（此时数据库键由多列组成），通常将出现复合主键。</p>
<p>复合主键类具有下列特征：</p>
<ul>
<li>它是一个普通的旧式     Java 对象 (POJO) 类。</li>
<li>它必须为 public，并且必须有一个 public 无参数构造函数。</li>
<li>如果使用基于属性的访问，则主键类的属性必须为 public 或 protected。</li>
<li>它必须是可序列化的。</li>
<li>它必须定义 equals 和 hashCode 方法。</li>
</ul>
<p>这些方法的值相等性的语义必须与键映射到的数据库类型的数据库相等性一致。</p>
<ul>
<li>它的字段或属性的类型和名称必须与使用 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Id" target="_blank" rel="external">@Id</a>     进行批注的实体主键字段或属性的类型和名称相对应。</li>
</ul>
<p>或者，您可以使复合主键类成为由实体拥有的嵌入类（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EmbeddedId" target="_blank" rel="external">@EmbeddedId</a>）。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDICGAA" target="_blank" rel="external">表 1-17</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/IdClass.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-17 @IdClass 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>value</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>要指定复合主键类，请将  value 设置为所需的 Class（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AttributeOverride" target="_blank" rel="external">@AttributeOverride</a>）。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIEDJE" target="_blank" rel="external">示例 1-37</a> 显示了一个非嵌入的复合主键类。在该类中，字段 empName 和 birthDay 的名称和类型必须对应于实体类中属性的名称和类型。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#BCGFBFCC" target="_blank" rel="external">示例 1-38</a> 显示了如何使用这个非嵌入的复合主键类（使用@IdClass 批注）配置 EJB 3.0 实体。由于实体类字段 empName 和 birthDay 在主键中使用，因此还必须使用 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Id" target="_blank" rel="external">@Id</a>批注对其进行批注。</p>
<p>示例 1-37 非嵌入的复合主键类</p>
<p>public class EmployeePK implements Serializable<br>{<br>private String empName;<br>private Date birthDay;<br>public EmployeePK()<br>    {<br>    }<br>public String getName()<br>    {<br>return empName;<br>    }<br>public void setName(String name)<br>    {<br>empName = name;<br>    }<br>public long getDateOfBirth()<br>    {<br>return birthDay;<br>    }<br>public void setDateOfBirth(Date date)<br>    {<br>birthDay = date;<br>    }<br>public int hashCode()<br>    {<br>return (int) empName.hashCode();<br>    }<br>public boolean equals(Object obj)<br>    {<br>if (obj == this) return true;<br>if (!(obj instanceof EmployeePK)) return false;<br>if (obj == null) return false;<br>EmployeePK pk = (EmployeePK) obj;<br>return pk.birthDay == birthDay &amp;&amp; pk.empName.equals(empName);<br>    }<br>}</p>
<p>示例 1-38 @IdClass</p>
<p>@IdClass(EmployeePK.class)<br>@Entity<br>public class Employee<br>{<br>@Id String empName;<br>@Id Date birthDay;<br>…<br>}</p>
<h1 id="Inheritance"><a href="#Inheritance" class="headerlink" title="@Inheritance"></a><strong>@Inheritance</strong></h1><p>默认情况下，JPA 持续性提供程序自动管理继承层次中实体的持续性。</p>
<p>使用 @Inheritance 批注自定义持续性提供程序的继承层次支持，以提高应用程序性能或匹配现有的数据模型。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIIADD" target="_blank" rel="external">表 1-18</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Inheritance.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-18 @Inheritance 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>strategy</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：InheritanceType.SINGLE_TABLE。  默认情况下，JPA 持续性提供程序假设层次中的所有类均映射到一个由表的标识符列（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorColumn" target="_blank" rel="external">@DiscriminatorColumn</a>）中的标识符值（请参阅  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorValue" target="_blank" rel="external">@DiscriminatorValue</a>）区分的表。  如果这并不适合于应用程序，或者如果必须匹配现有的数据模型，请将  strategy 设置为所需的 InheritanceType：     SINGLE_TABLE<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#sthref28" target="_blank" rel="external">Foot?1?</a> — 层次中的所有类均映射到一个表。该表有一个标识符列（请参阅       <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorColumn" target="_blank" rel="external">@DiscriminatorColumn</a>），它的值（请参阅       <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorValue" target="_blank" rel="external">@DiscriminatorValue</a>）标识由行表示的实例所属的特定子类。   TABLE_PER_CLASS — 每个类均映射到单独的表。该类的所有属性（包括继承的属性）映射到该类的表列。   JOINED — 类层次的根由一个表表示，而每个子类由单独的表表示。每个子类表只包含特定于该子类的那些字段（而非从其超类继承的字段）和主键列，这些主键列用作超类表主键的外键。</td>
</tr>
</tbody>
</table>
<p>Footnote?1?该选项为跨类层次的实体和查询之间的多态关系提供了最佳支持。该选项的缺点包括需要生成应为NOT NULL 的可空列。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFGEJD" target="_blank" rel="external">示例 1-39</a> 显示了如何使用此批注指定 Customer 的所有子类将使用 InheritanceType.JOINED。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCHEJA" target="_blank" rel="external">示例 1-40</a> 中的子类将映射到它自己的表（该表针对ValuedCustomer 的每个持久属性包含一列）和一个外键列（包含 Customer 表的主键）。</p>
<p>示例 1-39 @Inheritance — 使用 JOINED 的根类</p>
<p>@Entity@Inheritance(strategy=JOINED)public class Customer<br>{<br>@Id<br>private int customerId;<br>    …<br>}</p>
<p>示例 1-40 @Inheritance — 使用 JOINED 的子类</p>
<p>@Entity<br>public class ValuedCustomer extends Customer {<br>    …<br>}</p>
<p>在<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJHIAG" target="_blank" rel="external">示例 1-41</a> 中，默认情况下，InheritanceType.SINGLE_TABLE 应用于 Customer 及其所有子类。在该示例中，默认标识符表列 DTYPE（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorColumn" target="_blank" rel="external">@DiscriminatorColumn</a>）指定为具有标识符类型INTEGER，且 Customer 的 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#DiscriminatorValue" target="_blank" rel="external">@DiscriminatorValue</a>指定为 1。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDGEIH" target="_blank" rel="external">示例 1-42</a> 显示了如何将子类 ValuedCustomer 的标识符值指定为 2。在该示例中，Customer 和 ValuedCustomer 的所有持久属性将映射到一个表。</p>
<p>示例 1-41 @Inheritance — 指定其标识符列的根类</p>
<p>@Entity<br>@DiscriminatorColumn(discriminatorType=DiscriminatorType.INTEGER)<br>@DiscriminatorValue(value=”1”)<br>public class Customer {<br>    …<br>}</p>
<p>示例 1-42 @Inheritance — 指定其标识符值的子类</p>
<p>@Entity<br>@DiscriminatorValue(value=”2”)<br>public class ValuedCustomer extends Customer {<br>    …<br>}</p>
<h1 id="JoinColumn"><a href="#JoinColumn" class="headerlink" title="@JoinColumn"></a><strong>@JoinColumn</strong></h1><p>默认情况下，在实体关联中，JPA 持续性提供程序使用一个基于现有名称（如字段或属性名称）的数据库模式，以便它可以自动确定要使用的单个连接列（包含外键的列）。</p>
<p>在以下条件下使用 @JoinColumn 批注：</p>
<ul>
<li>默认连接列名称难于处理、是一个保留字、与预先存在的数据模型不兼容或作为数据库中的列名无效</li>
<li>您需要使用外部表中的列（非主键列）进行连接</li>
<li>您想要使用两个或更多连接列（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinColumns" target="_blank" rel="external">@JoinColumns</a>）</li>
<li>您想要使用一个连接表（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinTable" target="_blank" rel="external">@JoinTable</a>）</li>
</ul>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBCIDH" target="_blank" rel="external">表 1-19</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/JoinColumn.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-19 @JoinColumn 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>columnDefinition</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：空 String。  JPA 使用最少量 SQL 创建一个数据库表列。  如果需要使用更多指定选项创建列，请将  columnDefinition 设置为在针对列生成 DDL 时希望 JPA 使用的 String SQL 片断。</td>
</tr>
<tr>
<td>insertable</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：true。  默认情况下，JPA 持续性提供程序假设它可以插入到所有表列中。  如果该列为只读，请将  insertable 设置为 false。</td>
</tr>
<tr>
<td>name</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：如果使用一个连接列，则 JPA 持续性提供程序假设外键列的名称是以下名称的连接：     引用关系属性的名称       +“<em>”+ 被引用的主键列的名称。   引用实体的字段名称       +“</em>”+ 被引用的主键列的名称。    如果实体中没有这样的引用关系属性或字段（请参阅  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinTable" target="_blank" rel="external">@JoinTable</a>），则连接列名称格式化为以下名称的连接：实体名称 +“_”+ 被引用的主键列的名称。  这是外键列的名称。如果连接针对“一对一”或“多对一”实体关系，则该列位于源实体的表中。如果连接针对“多对多”实体关系，则该列位于连接表（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinTable" target="_blank" rel="external">@JoinTable</a>）中。  如果连接列名难于处理、是一个保留字、与预先存在的数据模型不兼容或作为数据库中的列名无效，请将  name 设置为所需的 String 列名。</td>
</tr>
<tr>
<td>nullable</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：true。  默认情况下，JPA 持续性提供程序假设允许所有列包含空值。  如果不允许该列包含空值，请将  nullable 设置为 false。</td>
</tr>
<tr>
<td>referencedColumnName</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：如果使用一个连接列，则 JPA 持续性提供程序假设在实体关系中，被引用的列名是被引用的主键列的名称。  如果在连接表（请参阅  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinTable" target="_blank" rel="external">@JoinTable</a>）中使用，则被引用的键列位于拥有实体（如果连接是反向连接定义的一部分，则为反向实体）的实体表中。  要指定其他列名，请将  referencedColumnName 设置为所需的 String 列名。</td>
</tr>
<tr>
<td>table</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序假设实体的所有持久字段存储到一个名称为实体类名称的数据库表中（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Table" target="_blank" rel="external">@Table</a>）。  如果该列与辅助表关联（请参阅  <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SecondaryTable" target="_blank" rel="external">@SecondaryTable</a>），请将  name 设置为相应辅助表名称的 String 名称，如<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCEHDA" target="_blank" rel="external">示例 1-8</a> 所示。</td>
</tr>
<tr>
<td>unique</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：false。  默认情况下，JPA 持续性提供程序假设允许所有列包含重复值。  如果不允许该列包含重复值，请将  unique 设置为 true。</td>
</tr>
<tr>
<td>updatable</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：true。  默认情况下，JPA 持续性提供程序假设它可以更新所有表列。  如果该列为只读，则将  updatable 设置为 false</td>
</tr>
</tbody>
</table>
<ol>
<li>示例 1-43 显示了如何使用此批注使 JPA 将数据库表 Employee 列 ADDR_ID 用作连接列。</li>
<li></li>
<li>示例 1-43 @JoinColumn</li>
<li></li>
</ol>
<p>@Entity<br>public class Employee implements Serializable {<br>    …<br>@ManyToOne<br>@JoinColumns({<br>@JoinColumn(name=”ADDR_ID”, referencedColumnName=”ID”),<br>@JoinColumn(name=”ADDR_ZIP”, referencedColumnName=”ZIP”)<br>    })<br>public Address getAddress() {<br>return address;<br>    }<br>    …<br>}</p>
<h1 id="JoinTable"><a href="#JoinTable" class="headerlink" title="@JoinTable"></a><strong>@JoinTable</strong></h1><p>默认情况下，JPA 持续性提供程序在映射多对多关联（或在单向的一对多关联中）的拥有方上的实体关联时使用一个连接表。连接表名称及其列名均在默认情况下指定，且 JPA 持续性提供程序假设：在关系的拥有方上的实体主表中，每个主键列有一个连接列。</p>
<p>如果您需要执行以下操作，请使用 @JoinTable 批注：</p>
<ul>
<li>由于默认名称难于处理、是一个保留字、与预先存在的数据模型不兼容或作为数据库中的表名无效而更改连接表的名称</li>
<li>由于默认名称难于处理、是一个保留字、与预先存在的数据模型不兼容或作为数据库中的列名无效而更改连接表的列名称</li>
<li>使用特定目录或模式配置连接表</li>
<li>使用唯一约束配置一个或多个连接表列</li>
<li>每个实体使用多个连接列</li>
</ul>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDDECF" target="_blank" rel="external">表 1-21</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/JoinTable.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-21 @JoinTable 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>catalog</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：空 String。  默认情况下，JPA 使用任何适用于数据库的默认目录。  如果默认目录不适合于应用程序，请将  catalog 设置为要使用的 String 目录名。</td>
</tr>
<tr>
<td>inverseJoinColumns</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JoinColumn 的空数组。  默认情况下，JPA 持续性提供程序假设关联的被拥有方（或另一方）上有一个连接列：被拥有实体的主键列。JPA 通过连接被拥有实体的名称 +“_”+ 被引用的主键列的名称来命名该列。  如果这样的列名难于处理、是一个保留字、与预先存在的数据模型不兼容，或者如果要指定多个连接列，则将  joinColumns 设置为 JoinColumn（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinColumn" target="_blank" rel="external">@JoinColumn</a>）的一个或多个实例。</td>
</tr>
<tr>
<td>joinColumns</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JoinColumn 的空数组。  默认情况下，JPA 持续性提供程序假设：拥有实体的每个主键列都有一个连接列。该持续性提供程序通过连接拥有实体的名称+“_”+ 被引用主键列的名称来命名这些列。  如果这样的列名难于处理、是一个保留字、与预先存在的数据模型不兼容，或者如果要指定多个连接列，则将  joinColumns 设置为 JoinColumn（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinColumn" target="_blank" rel="external">@JoinColumn</a>）的一个或多个实例。</td>
</tr>
<tr>
<td>name</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序通过使用下划线连接关联主表（拥有方优先）的表名来命名连接表。  如果这样的连接表难于处理、是一个保留字或与预先存在的数据模型不兼容，则将  name 设置为相应的连接表名。在<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIEFJE" target="_blank" rel="external">示例 1-45</a> 中，JPA 使用名为 EJB_PROJ_EMP 的连接表。</td>
</tr>
<tr>
<td>schema</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：空 String。  默认情况下，JPA 使用任何适用于数据库的默认模式。  如果默认模式不适合于应用程序，则将  schema 设置为要使用的 String 模式名。</td>
</tr>
<tr>
<td>uniqueConstraints</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：UniqueConstraint 的空数组。  默认情况下，JPA 持续性提供程序假设连接表中的任何列均没有唯一约束。  如果唯一约束应用于该表中的一列或多列，则将  uniqueContraints 设置为一个或多个 UniqueConstraint 实例的数组。有关详细信息，请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#UniqueConstraint" target="_blank" rel="external">@UniqueConstraint</a>。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIEFJE" target="_blank" rel="external">示例 1-45</a> 显示了如何使用此批注为 Employee 与 Project 之间实体的多对多关系指定一个名为 EMP_PROJ_EMP 的连接表。连接表中有两列：EMP_ID 和 PROJ_ID。EMP_ID 列包含其主键列（被引用列）名为 ID 的 Employee 表中的主键值。PROJ_ID 列包含其主键列（被引用列）也名为 ID 的 Project 表中的主键值。</p>
<p>示例 1-45 @JoinTable</p>
<p>@Entity<br>public class Employee implements Serializable {<br>    …<br>@ManyToMany<br>@JoinTable(<br>name=”EJB_PROJ_EMP”,<br>joinColumns=@JoinColumn(name=”EMP_ID”,<br>referencedColumnName=”ID”),<br>inverseJoinColumns=@JoinColumn(name=”PROJ_ID”,<br>referencedColumnName=”ID”)<br>    )<br>public Collection getProjects() {<br>return projects;<br>    }<br>    …<br>}</p>
<h1 id="Lob"><a href="#Lob" class="headerlink" title="@Lob"></a><strong>@Lob</strong></h1><p>默认情况下，JPA 持续性提供程序假设所有持久数据均可以表示为典型的数据库数据类型。</p>
<p>结合使用 @Lob 批注与 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Basic" target="_blank" rel="external">@Basic</a>映射，以指定持久属性或字段应作为大型对象持久保存到数据库支持的大型对象类型。</p>
<p>Lob 可以是二进制类型或字符类型。持续性提供程序从持久字段或属性的类型推断出Lob 类型。</p>
<p>对于基于字符串和字符的类型，默认值为 Clob。在所有其他情况下，默认值为 Blob。</p>
<p>还可以使用 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Column" target="_blank" rel="external">@Column</a>属性 columnDefinition 进一步改进 Lob 类型。</p>
<p>此批注没有属性。有关更多详细信息，请参阅<a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Lob.html" target="_blank" rel="external">API</a>。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBIFHG" target="_blank" rel="external">示例 1-46</a> 显示了如何使用此批注指定持久字段 pic 应作为 Blob 进行持久保存。</p>
<p>示例 1-46 @Lob</p>
<p>@Entity<br>public class Employee implements Serializable {<br>    …<br>@Lob<br>@Basic(fetch=LAZY)<br>@Column(name=”EMP_PIC”, columnDefinition=”BLOB NOT NULL”)<br>protected byte[] pic;<br>    …<br>}</p>
<h1 id="ManyToMany"><a href="#ManyToMany" class="headerlink" title="@ManyToMany"></a><strong>@ManyToMany</strong></h1><p>默认情况下，JPA 为具有多对多多重性的为多值关联自动定义一个 @ManyToMany 映射。</p>
<p>使用 @ManyToMany 批注：</p>
<ul>
<li>将获取类型配置为 LAZY</li>
<li>如果空值不适合于应用程序，则将映射配置为禁止空值（针对非基元类型）</li>
<li>由于所使用的 Collection 不是使用一般参数定义的，因此配置关联的目标实体</li>
<li>配置必须层叠到关联目标的操作：例如，如果删除了拥有实体，则确保还删除关联的目标</li>
<li>配置由持续性提供程序使用的连接表的详细信息（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinTable" target="_blank" rel="external">@JoinTable</a>）</li>
</ul>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDHJFCI" target="_blank" rel="external">表 1-22</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/ManyToMany.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-22 @ManyToMany 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>cascade</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：CascadeType 的空数组。  默认情况下，JPA 不会将任何持续性操作层叠到关联的目标。  如果希望某些或所有持续性操作层叠到关联的目标，请将  cascade 设置为一个或多个 CascadeType 实例，其中包括：     ALL — 针对拥有实体执行的任何持续性操作均层叠到关联的目标。   MERGE — 如果合并了拥有实体，则将 merge 层叠到关联的目标。   PERSIST — 如果持久保存拥有实体，则将 persist 层叠到关联的目标。   REFRESH — 如果刷新了拥有实体，则 refresh 为关联的层叠目标。   REMOVE — 如果删除了拥有实体，则还删除关联的目标。</td>
</tr>
<tr>
<td>fetch</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：FetchType.EAGER。  默认情况下，JPA 持续性提供程序使用获取类型 EAGER：这将要求持续性提供程序运行时必须迫切获取数据。  如果这不适合于应用程序或特定的持久字段，请将  fetch 设置为 FetchType.LAZY：这将提示持续性提供程序在首次访问数据（如果可以）时应不急于获取数据。</td>
</tr>
<tr>
<td>mappedBy</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：如果关系是单向的，则 JPA 持续性提供程序确定拥有该关系的字段。  如果关系是双向的，则将关联的反向（非拥有）一方上的  mappedBy 属性设置为拥有该关系的字段或属性的名称（如<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJIIFA" target="_blank" rel="external">示例 1-48</a> 所示）。</td>
</tr>
<tr>
<td>targetEntity</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：使用一般参数定义的  Collection 的参数化类型。  默认情况下，如果使用通过一般参数定义的  Collection，则持续性提供程序将从被引用的对象类型推断出关联的目标实体。  如果 Collection 不使用一般参数，则必须指定作为关联目标的实体类：将关联拥有方上的 targetEntity 元素设置为作为关系目标的实体的 Class。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDEDECI" target="_blank" rel="external">示例 1-47</a> 和<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJIIFA" target="_blank" rel="external">示例 1-48</a> 显示了如何使用此批注在使用一般参数的Customer 和 PhoneNumber 之间配置一个多对多映射。</p>
<p>示例 1-47 @ManyToMany — 使用一般参数的Customer 类</p>
<p>@Entity<br>public class Customer implements Serializable {<br>    …<br>@ManyToMany<br>@JoinTable(<br>name=”CUST_PHONE”,<br>joinColumns=<br>@JoinColumn(name=”CUST_ID”, referencedColumnName=”ID”),<br>inverseJoinColumns=<br>@JoinColumn(name=”PHONE_ID”, referencedColumnName=”ID”)<br>    )<br>public Set<phonenumber> getPhones() {<br>return phones;<br>    }<br>    …<br>}</phonenumber></p>
<p>示例 1-48 @ManyToMany — 使用一般参数的PhoneNumber 类</p>
<p>@Entity<br>public class PhoneNumber implements Serializable {<br>    …<br>@ManyToMany(mappedBy=”phones”)<br>public Set<customer> getCustomers() {<br>return customers;<br>    }<br>    …<br>}</customer></p>
<h1 id="ManyToOne"><a href="#ManyToOne" class="headerlink" title="@ManyToOne"></a><strong>@ManyToOne</strong></h1><p>默认情况下，JPA 为指向具有多对一多重性的其他实体类的单值关联自动定义一个 ManyToOne 映射。</p>
<p>使用 @ManyToOne 批注：</p>
<ul>
<li>将获取类型配置为 LAZY</li>
<li>如果空值不适合于应用程序，则将映射配置为禁止空值（针对非基元类型）</li>
<li>配置关联的目标实体（如果无法从被引用的对象类型推断出它）</li>
<li>配置必须层叠到关联目标的操作：例如，如果删除了拥有实体，则确保还删除关联的目标</li>
</ul>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDBFHJ" target="_blank" rel="external">表 1-23</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/ManyToOne.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-23 @ManyToOne 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>cascade</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：CascadeType 的空数组。  默认情况下，JPA 不会将任何持续性操作层叠到关联的目标。  如果希望某些或所有持续性操作层叠到关联的目标，请将  cascade 设置为一个或多个 CascadeType 实例，其中包括：     ALL — 针对拥有实体执行的任何持续性操作均层叠到关联的目标。   MERGE — 如果合并了拥有实体，则将 merge 层叠到关联的目标。   PERSIST — 如果持久保存拥有实体，则将 persist 层叠到关联的目标。   REFRESH — 如果刷新了拥有实体，则 refresh 为关联的层叠目标。   REMOVE — 如果删除了拥有实体，则还删除关联的目标。</td>
</tr>
<tr>
<td>fetch</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：FetchType.EAGER。  默认情况下，JPA 持续性提供程序使用获取类型 EAGER：这将要求持续性提供程序运行时必须迫切获取数据。  如果这不适合于应用程序或特定的持久字段，请将  fetch 设置为 FetchType.LAZY：这将提示持续性提供程序在首次访问数据（如果可以）时应不急于获取数据。</td>
</tr>
<tr>
<td>optional</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：true。  默认情况下，JPA 持续性提供程序假设所有（非基元）字段和属性的值可以为空。  如果这并不适合于您的应用程序，请将  optional 设置为 false。</td>
</tr>
<tr>
<td>targetEntity</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序从被引用的对象类型推断出关联的目标实体  如果持续性提供程序无法推断出目标实体的类型，则将关联拥有方上的  targetEntity 元素设置为作为关系目标的实体的 Class。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDICGBB" target="_blank" rel="external">示例 1-49</a> 显示了如何使用此批注在使用一般参数的 Customer（被拥有方）和 Order（拥有方）之间配置一个多对一映射。</p>
<p>示例 1-49 @ManyToOne</p>
<p>@Entity<br>public class Order implements Serializable {<br>    …<br>@ManyToOne(optional=false)<br>@JoinColumn(name=”CUST_ID”, nullable=false, updatable=false)<br>public Customer getCustomer() {<br>return customer;<br>    }<br>    …<br>}</p>
<h1 id="MapKey"><a href="#MapKey" class="headerlink" title="@MapKey"></a><strong>@MapKey</strong></h1><p>默认情况下，JPA 持续性提供程序假设关联实体的主键为 java.util.Map 类型的关联的 Map 键：</p>
<ul>
<li>如果主键是批注为 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Id" target="_blank" rel="external">@Id</a>     的非复合主键，则该字段或属性的类型实例将用作 Map 键。</li>
<li>如果主键是批注为 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#IdClass" target="_blank" rel="external">@IdClass</a>     的复合主键，则主键类的实例将用作 Map 键。</li>
</ul>
<p>使用 @MapKey 批注：</p>
<ul>
<li>将某个其他字段或属性指定为 Map 键（如果关联实体的主键不适合于应用程序）</li>
<li>指定一个嵌入的复合主键类（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EmbeddedId" target="_blank" rel="external">@EmbeddedId</a>）</li>
</ul>
<p>指定的字段或属性必须具有唯一约束（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#UniqueConstraint" target="_blank" rel="external">@UniqueConstraint</a>）。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJCEJD" target="_blank" rel="external">表 1-24</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/MapKey.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-24 @MapKey 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：默认情况下，JPA 持续性提供程序将关联实体的主键作为 Map 键，以用于映射到非复合主键或复合主键（批注为 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#IdClass" target="_blank" rel="external">@IdClass</a>）的  java.util.Map 的属性或字段。  如果要将某个其他字段或属性用作  Map 键，请将 name 设置为要使用的关联实体的 String 字段或属性名。</td>
</tr>
</tbody>
</table>
<p>在<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDIEIG" target="_blank" rel="external">示例 1-52</a> 中，Project 对作为 Map 的 Employee 实例拥有一对多关系。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDIEIG" target="_blank" rel="external">示例 1-52</a> 显示了如何使用 @MapKey 批注指定此 Map 的键为 Employee 字段 empPK，它是一个类型为 EmployeePK（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDIEIG" target="_blank" rel="external">示例 1-52</a>）的嵌入式复合主键（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBJCCG" target="_blank" rel="external">示例 1-51</a>）。</p>
<p>示例 1-50 使用 @MapKey 的 Project 实体</p>
<p>@Entitypublic class Project {<br>…@OneToMany(mappedBy=”project”)    @MapKey(name=”empPK”)    public Map<employeepk, employee=""><br>getEmployees() {    …<br>    }<br>…}</employeepk,></p>
<p>示例 1-51 Employee 实体</p>
<p>@Entitypublic class Employee {    @EmbeddedId public EmployeePK getEmpPK()<br>{     …<br>}    …    @ManyToOne    @JoinColumn(name=”proj_id”)    public Project getProject() {<br>    …<br>    }…}</p>
<p>示例 1-52 EmployeePK 复合主键类</p>
<p>@Embeddablepublic class EmployeePK {    String name;    Date birthDate;}</p>
<h1 id="MappedSuperclass"><a href="#MappedSuperclass" class="headerlink" title="@MappedSuperclass"></a><strong>@MappedSuperclass</strong></h1><p>默认情况下，JPA 持续性提供程序假设实体的所有持久字段均在该实体中定义。</p>
<p>使用 @MappedSuperclass 批注指定一个实体类从中继承持久字段的超类。当多个实体类共享通用的持久字段或属性时，这将是一个方便的模式。</p>
<p>您可以像对实体那样使用任何直接和关系映射批注（如<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Basic" target="_blank" rel="external">@Basic</a>和 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ManyToMany" target="_blank" rel="external">@ManyToMany</a>）对该超类的字段和属性进行批注，但由于没有针对该超类本身的表存在，因此这些映射只适用于它的子类。继承的持久字段或属性属于子类的表。</p>
<p>可以在子类中使用 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AttributeOverride" target="_blank" rel="external">@AttributeOverride</a>或 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AssociationOverride" target="_blank" rel="external">@AssociationOverride</a>批注来覆盖超类的映射配置。</p>
<p>该批注没有属性。有关更多详细信息，请参阅<a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/EmbeddableSuperclass.html" target="_blank" rel="external">API</a>。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFHDJD" target="_blank" rel="external">示例 1-53</a> 显示了如何使用此批注将 Employee 指定为映射超类。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDAIHD" target="_blank" rel="external">示例 1-54</a> 显示了如何扩展实体中的此超类，以及如何在实体类中使用<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#AttributeOverride" target="_blank" rel="external">@AttributeOverride</a>以覆盖超类中设置的配置。</p>
<p>示例 1-53 @MappedSuperclass</p>
<p>@MappedSuperclass<br>public class Employee {<br>@Id<br>protected Integer empId;<br>@Version<br>protected Integer version;<br>@ManyToOne<br>@JoinColumn(name=”ADDR”)<br>protected Address address;<br>public Integer getEmpId() {<br>        …<br>    }<br>public void setEmpId(Integer id) {<br>        …<br>    }<br>public Address getAddress() {<br>        …<br>    }<br>public void setAddress(Address addr) {<br>        …<br>    }<br>}</p>
<p>示例 1-54 扩展 @MappedSuperclass</p>
<p>@Entity<br>@AttributeOverride(name=”address”,<br>column=@Column(name=”ADDR_ID”))<br>public class PartTimeEmployee extends Employee {<br>@Column(name=”WAGE”)<br>protected Float hourlyWage;<br>public PartTimeEmployee() {<br>        …<br>    }<br>public Float getHourlyWage() {<br>        …<br>    }<br>public void setHourlyWage(Float wage) {<br>        …<br>    }<br>}</p>
<h1 id="NamedNativeQueries"><a href="#NamedNativeQueries" class="headerlink" title="@NamedNativeQueries"></a><strong>@NamedNativeQueries</strong></h1><p>如果需要指定多个 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedNativeQuery" target="_blank" rel="external">@NamedNativeQuery</a>，则必须使用一个@NamedNativeQueries 批注指定所有命名查询。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFHDBB" target="_blank" rel="external">表 1-5</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/NamedNativeQueries.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-25 @NamedNativeQueries 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>value</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>要指定两个或更多属性覆盖，请将  value 设置为 NamedNativeQuery 实例数组（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedNativeQuery" target="_blank" rel="external">@NamedNativeQuery</a>）。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBFEFG" target="_blank" rel="external">示例 1-6</a> 显示了如何使用此批注指定两个命名原生查询。</p>
<p>示例 1-55 @NamedNativeQueries</p>
<p>@Entity<br>@NamedNativeQueries({<br>@NamedNativeQuery(<br>name=”findAllPartTimeEmployees”,<br>query=”SELECT <em> FROM EMPLOYEE WHERE PRT_TIME=1”<br>    ),<br>@NamedNativeQuery(<br>name=”findAllSeasonalEmployees”,<br>query=”SELECT </em> FROM EMPLOYEE WHERE SEASON=1”<br>    )<br>})<br>public class PartTimeEmployee extends Employee {<br>    …<br>}</p>
<h1 id="NamedNativeQuery"><a href="#NamedNativeQuery" class="headerlink" title="@NamedNativeQuery"></a><strong>@NamedNativeQuery</strong></h1><p>在使用 JPA 持续性提供程序的应用程序中，可以使用实体管理器动态创建和执行查询，也可以预定义查询并在运行时按名称执行。</p>
<p>使用 @NamedNativeQuery 批注创建与 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Entity" target="_blank" rel="external">@Entity</a>或 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MappedSuperclass" target="_blank" rel="external">@MappedSuperclass</a>关联的预定义查询，这些查询：</p>
<ul>
<li>使用基础数据库的原生     SQL</li>
<li>经常被使用</li>
<li>比较复杂并且难于创建</li>
<li>可以在不同实体之间共享</li>
<li>返回实体、标量值或两者的组合（另请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ColumnResult" target="_blank" rel="external">@ColumnResult</a>、<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EntityResult" target="_blank" rel="external">@EntityResult</a>、<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#FieldResult" target="_blank" rel="external">@FieldResult</a>     和 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SqlResultSetMapping" target="_blank" rel="external">@SqlResultSetMapping</a>）</li>
</ul>
<p>如果有多个要定义的 @NamedNativeQuery，则必须使用 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedNativeQueries" target="_blank" rel="external">@NamedNativeQueries</a>。</p>
<p>要预定义适合于任何数据库的可移植查询，请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedQuery" target="_blank" rel="external">@NamedQuery</a>。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCJEHE" target="_blank" rel="external">表 1-6</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/NamedNativeQuery.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-26 @NamedNativeQuery 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>query</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>要指定查询，请将 query 设置为 SQL 查询（作为 String）。  有关原生 SQL 查询语言的详细信息，请参阅数据库文档。</td>
</tr>
<tr>
<td>hints</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：空 QueryHint 数组。  默认情况下，JPA 持续性提供程序假设 SQL 查询应完全按照 query 属性提供的方式执行。  要微调查询的执行，可以选择将  hints 设置为一个 QueryHint 数组（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#QueryHint" target="_blank" rel="external">@QueryHint</a>）。在执行时，EntityManager 将向基础数据库传递提示。</td>
</tr>
<tr>
<td>name</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>要指定查询名称，请将  name 设置为所需的 String 名称。  这是您在运行时调用查询所使用的名称（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#BGBDHEGD" target="_blank" rel="external">示例 1-60</a>）。</td>
</tr>
<tr>
<td>resultClass</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序假设结果类是关联实体的 Class。  要指定结果类，请将  resultClass 设置为所需的 Class。</td>
</tr>
<tr>
<td>resultSetMapping</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序假设原生 SQL 查询中的 SELECT 语句：返回一个类型的实体；包括与返回的实体的所有字段或属性相对应的所有列；并使用与字段或属性名称（未使用 AS 语句）相对应的列名。  要控制 JPA 持续性提供程序如何将 JDBC 结果集映射到实体字段或属性以及标量，请通过将  resultSetMapping 设置为所需的 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SqlResultSetMapping" target="_blank" rel="external">@SqlResultSetMapping</a>  的 String 名称来指定结果集映射。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#BGBBHCBF" target="_blank" rel="external">示例 1-59</a> 显示了如何使用 @NamedNativeQuery 批注定义一个使用基础数据库的原生SQL 的查询。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#BGBDHEGD" target="_blank" rel="external">示例 1-60</a> 显示了如何使用 EntityManager 获取此查询以及如何通过 Query 方法 getResultList 执行该查询。</p>
<p>示例 1-56 使用 @NamedNativeQuery 实现一个 Oracle 层次查询</p>
<p>@Entity<br>@NamedNativeQuery(<br>name=”findAllEmployees”,<br>query=”SELECT * FROM EMPLOYEE”<br>)<br>public class Employee implements Serializable {<br>    …<br>}</p>
<p>示例 1-57 执行一个命名原生查询</p>
<p>Query queryEmployees =<br>em.createNamedQuery(“findAllEmployees”);<br>Collection employees = queryEmployees.getResultList();</p>
<h1 id="NamedQueries"><a href="#NamedQueries" class="headerlink" title="@NamedQueries"></a><strong>@NamedQueries</strong></h1><p>如果需要指定多个 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedQuery" target="_blank" rel="external">@NamedQuery</a>，则必须使用一个@NamedQueries 批注指定所有命名查询。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFHDBB" target="_blank" rel="external">表 1-5</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/NamedQueries.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-27 @NamedQueries 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>value</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>要指定两个或更多属性覆盖，请将  value 设置为 NamedQuery 实例数组（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedQuery" target="_blank" rel="external">@NamedQuery</a>）。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBFEFG" target="_blank" rel="external">示例 1-6</a> 显示了如何使用此批注指定两个命名查询。</p>
<p>示例 1-58 @NamedQueries</p>
<p>@Entity<br>@NamedQueries({<br>@NamedQuery(<br>name=”findAllEmployeesByFirstName”,<br>query=”SELECT OBJECT(emp) FROM Employee emp WHERE emp.firstName =<br>:firstname”<br>    ),<br>@NamedQuery(<br>name=”findAllEmployeesByLasttName”,<br>query=”SELECT OBJECT(emp) FROM Employee emp WHERE emp.lasstName =<br>:lastname”<br>    )<br>})<br>public class PartTimeEmployee extends Employee {<br>    …<br>}</p>
<h1 id="NamedQuery"><a href="#NamedQuery" class="headerlink" title="@NamedQuery"></a><strong>@NamedQuery</strong></h1><p>在使用 JPA 持续性提供程序的应用程序中，可以使用实体管理器动态创建和执行查询，也可以预定义查询并在运行时按名称执行。</p>
<p>使用 @NamedQuery 批注创建与 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Entity" target="_blank" rel="external">@Entity</a>或 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MappedSuperclass" target="_blank" rel="external">@MappedSuperclass</a>关联的预定义查询，这些查询：</p>
<ul>
<li>使用 JPA 查询语言（请参阅     <a href="http://jcp.org/aboutJava/communityprocess/pfd/jsr220/index.html" target="_blank" rel="external">JSR-000220     Enterprise JavaBeans v3.0</a> 规范，第 4 章）进行基于任何基础数据库的可移植执行</li>
<li>经常被使用</li>
<li>比较复杂并且难于创建</li>
<li>可以在不同实体之间共享</li>
<li>只返回实体（从不返回标量值），并只返回一个类型的实体</li>
</ul>
<p>如果有多个要定义的 @NamedQuery，则必须使用 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedQueries" target="_blank" rel="external">@NamedQueries</a>。</p>
<p>要在已知的基础数据库中预定义原生 SQL 查询，请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedNativeQuery" target="_blank" rel="external">@NamedNativeQuery</a>。使用原生 SQL 查询，您可以返回实体（包括不同类型的实体）、标量值或同时返回两者。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCJEHE" target="_blank" rel="external">表 1-6</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/NamedQuery.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-28 @NamedQuery 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>query</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>要指定查询，请将 query 设置为 JPA 查询语言（作为 String）。  有关 JPA 查询语言的详细信息，请参阅 <a href="http://jcp.org/aboutJava/communityprocess/pfd/jsr220/index.html" target="_blank" rel="external">JSR-000220  Enterprise JavaBeans v.3.0</a> 规范的第 4 章。</td>
</tr>
<tr>
<td>hints</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：空 QueryHint 数组。  默认情况下，JPA 持续性提供程序假设 SQL 查询应完全按照 query 属性提供的方式执行，而不管基础数据库如何。  如果您知道基础数据库在运行时的状态，则要微调查询的执行，可以选择将  hints 设置为 QueryHint 数组（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#QueryHint" target="_blank" rel="external">@QueryHint</a>）。在执行时，EntityManager 将向基础数据库传递提示。</td>
</tr>
<tr>
<td>name</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>要指定查询名称，请将  name 设置为查询名称（作为 String）。  这是您在运行时调用查询所使用的名称（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#BGBDHEGD" target="_blank" rel="external">示例 1-60</a>）。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#BGBBHCBF" target="_blank" rel="external">示例 1-59</a> 显示了如何使用 @NamedQuery 批注定义一个JPA 查询语言查询，该查询使用名为firstname 的参数。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#BGBDHEGD" target="_blank" rel="external">示例 1-60</a> 显示了如何使用 EntityManager 获取此查询并使用 Query 方法 setParameter 设置 firstname 参数。</p>
<p>示例 1-59 使用 @NamedQuery 实现一个带参数的查询</p>
<p>@Entity<br>@NamedQuery(<br>name=”findAllEmployeesByFirstName”,<br>query=”SELECT OBJECT(emp) FROM Employee emp WHERE emp.firstName =<br>:firstname”<br>)<br>public class Employee implements Serializable {<br>    …<br>}</p>
<p>示例 1-60 执行命名查询</p>
<p>Query queryEmployeesByFirstName =<br>em.createNamedQuery(“findAllEmployeesByFirstName”);<br>queryEmployeeByFirstName.setParameter(“firstName”, “John”);<br>Collection employees = queryEmployessByFirstName.getResultList();</p>
<h1 id="OneToMany"><a href="#OneToMany" class="headerlink" title="@OneToMany"></a><strong>@OneToMany</strong></h1><p>默认情况下，JPA 为具有一对多多重性的多值关联定义一个 OneToMany 映射。</p>
<p>使用 @OneToMany 批注：</p>
<ul>
<li>将获取类型配置为 LAZY</li>
<li>由于所使用的 Collection 不是使用一般参数定义的，因此配置关联的目标实体</li>
<li>配置必须层叠到关联目标的操作：例如，如果删除了拥有实体，则确保还删除关联的目标</li>
<li>配置持续性提供程序对单向一对多关系使用的连接表（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#JoinTable" target="_blank" rel="external">@JoinTable</a>）的详细信息</li>
</ul>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFABBF" target="_blank" rel="external">表 1-29</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/OneToMany.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-29 @OneToMany 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>cascade</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：CascadeType 的空数组。  默认情况下，JPA 不会将任何持续性操作层叠到关联的目标。  如果希望某些或所有持续性操作层叠到关联的目标，请将  cascade 设置为一个或多个 CascadeType 实例，其中包括：     ALL - 针对拥有实体执行的任何持续性操作均层叠到关联的目标。   MERGE - 如果合并了拥有实体，则将 merge 层叠到关联的目标。   PERSIST - 如果持久保存拥有实体，则将 persist 层叠到关联的目标。   REFRESH - 如果刷新了拥有实体，则 refresh 为关联的层叠目标。   REMOVE - 如果删除了拥有实体，则还删除关联的目标。</td>
</tr>
<tr>
<td>fetch</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：FetchType.EAGER。  默认情况下，JPA 持续性提供程序使用获取类型 EAGER：它要求持续性提供程序运行时必须急性获取数据。  如果这不适合于应用程序或特定的持久字段，请将  fetch 设置为 FetchType.LAZY：它提示持续性提供程序在首次访问数据（如果可以）时应惰性获取数据。</td>
</tr>
<tr>
<td>mappedBy</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：如果关系是单向的，则该持续性提供程序确定拥有该关系的字段。  如果关系是双向的，则将关联相反（非拥有）方上的  mappedBy 元素设置为拥有此关系的字段或属性的名称（如<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDECAEH" target="_blank" rel="external">示例 1-62</a> 所示）。</td>
</tr>
<tr>
<td>targetEntity</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：使用一般参数定义的  Collection 的参数化类型。  默认情况下，如果使用通过一般参数定义的 Collection，则持续性提供程序从被引用的对象类型推断出关联的目标实体。  如果 Collection 不使用一般参数，则必须指定作为关联目标的实体类：将关联拥有方上的 targetEntity 元素设置为作为关系目标的实体的 Class。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBJBEH" target="_blank" rel="external">示例 1-61</a> 和<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDECAEH" target="_blank" rel="external">示例 1-62</a> 显示了如何使用此批注在使用一般参数的Customer（被拥有方）和 Order（拥有方）之间配置一个一对多映射。</p>
<p>示例 1-61 @OneToMany - 使用一般参数的Customer 类</p>
<p>@Entity<br>public class Customer implements Serializable {<br>    …<br>@OneToMany(cascade=ALL, mappedBy=”customer”)<br>public Set<order> getOrders() {<br>return orders;<br>    }<br>    …<br>}</order></p>
<p>示例 1-62 @ManyToOne - 使用一般参数的Order 类</p>
<p>@Entity<br>public class Customer implements Serializable {<br>    …<br>@ManyToOne<br>@JoinColumn(name=”CUST_ID”, nullable=false)<br>public Customer getCustomer() {<br>return customer;<br>    }<br>    …<br>}</p>
<h1 id="OneToOne"><a href="#OneToOne" class="headerlink" title="@OneToOne"></a><strong>@OneToOne</strong></h1><p>默认情况下，JPA 为指向另一个具有一对一多重性的实体的单值关联定义一个 OneToOne 映射，并从被引用的对象类型推断出关联的目标实体。</p>
<p>使用 @OneToOne 批注：</p>
<ul>
<li>将获取类型配置为 LAZY</li>
<li>如果空值不适合于应用程序，则将映射配置为禁止空值（针对非基元类型）</li>
<li>配置关联的目标实体（如果无法从被引用的对象类型推断出它）</li>
<li>配置必须层叠到关联目标的操作：例如，如果删除了拥有实体，则确保还删除关联的目标</li>
</ul>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDHCJHG" target="_blank" rel="external">表 1-30</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/OneToOne.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-30 @OneToOne 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>cascade</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：空 CascadeType 数组。  默认情况下，JPA 不会将任何持续性操作层叠到关联的目标。  如果希望某些或所有持续性操作层叠到关联的目标，请将  cascade 设置为一个或多个 CascadeType 实例，其中包括：     ALL - 针对拥有实体执行的任何持续性操作均层叠到关联的目标。   MERGE - 如果合并了拥有实体，则将 merge 层叠到关联的目标。   PERSIST - 如果持久保存拥有实体，则将 persist 层叠到关联的目标。   REFRESH - 如果刷新了拥有实体，则 refresh 为关联的层叠目标。   REMOVE - 如果删除了拥有实体，则还删除关联的目标。</td>
</tr>
<tr>
<td>fetch</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：FetchType.EAGER。  默认情况下，JPA 持续性提供程序使用获取类型 EAGER：它要求持续性提供程序运行时必须急性获取数据。  如果这不适合于应用程序或特定的持久字段，请将  fetch 设置为 FetchType.LAZY：它提示持续性提供程序在首次访问数据（如果可以）时应惰性获取数据。</td>
</tr>
<tr>
<td>mappedBy</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序从被引用的对象类型推断出关联的目标实体  如果持续性提供程序无法推断关联的目标实体，则将关联的相反（非拥有）方上的  mappedBy 元素设置为拥有此关系的字段或属性的 String 名称（如<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFHJBA" target="_blank" rel="external">示例 1-64</a>）所示。</td>
</tr>
<tr>
<td>optional</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：true。  默认情况下，JPA 持续性提供程序假设所有（非基元）字段和属性的值可以为空。  如果这并不适合于您的应用程序，请将  optional 设置为 false。</td>
</tr>
<tr>
<td>targetEntity</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序从被引用的对象类型推断出关联的目标实体  如果持续性提供程序无法推断出目标实体的类型，则将关联的拥有方上的  targetEntity 元素设置为作为关系目标的实体的 Class。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBCBGI" target="_blank" rel="external">示例 1-63</a> 和<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFHJBA" target="_blank" rel="external">示例 1-64</a> 显示了如何使用此批注在 Customer（拥有方）和 CustomerRecord（被拥有方）之间配置一个一对一映射。</p>
<p>示例 1-63 @OneToOne - Customer 类</p>
<p>@Entity<br>public class Customer implements Serializable {<br>    …<br>@OneToOne(optional=false)<br>@JoinColumn(name=”CUSTREC_ID”, unique=true, nullable=false,<br>updatable=false)<br>public CustomerRecord getCustomerRecord() {<br>return customerRecord;<br>}<br>    …<br>}</p>
<p>示例 1-64 @OneToOne - CustomerRecord 类</p>
<p>@Entity<br>public class CustomerRecord implements Serializable {<br>    …<br>@OneToOne(optional=false, mappedBy=”customerRecord”)<br>public Customer getCustomer() {<br>return customer;<br>    }<br>    …<br>}</p>
<h1 id="OrderBy"><a href="#OrderBy" class="headerlink" title="@OrderBy"></a><strong>@OrderBy</strong></h1><p>默认情况下，JPA 持续性提供程序按关联实体的主键以升序顺序检索 Collection 关联的成员。</p>
<p>将 @OrderBy 批注与 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#OneToMany" target="_blank" rel="external">@OneToMany</a>和 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ManyToMany" target="_blank" rel="external">@ManyToMany</a>一起使用以便：</p>
<p>·   指定一个或多个作为排序依据的其他字段或属性</p>
<p>·   为每个这样的字段或属性名指定不同的排序（升序或降序）</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGJDIB" target="_blank" rel="external">表 1-31</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/OrderBy.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-31 @OrderBy 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>value</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序按关联实体的主键以升序顺序检索 Collection 关联的成员。  如果要按某些其他字段或属性排序并指定了不同的排序，则将  value 设置为以下元素的逗号分隔列表：”property-or-field-name ASC\</td>
<td>DESC”（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDHGAG" target="_blank" rel="external">示例 1-65</a>）。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDHGAG" target="_blank" rel="external">示例 1-65</a> 显示了如何使用 @OrderBy 批注指定 Project 方法 getEmployees 应按 Employee 字段 lastname 以升序顺序并按 Employee 字段 seniority 以降序顺序返回 Employee 的 List。<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDEFIIA" target="_blank" rel="external">示例 1-66</a> 显示了默认情况下，Employee 方法 getProjects 按 Employee 主键 empId 以升序顺序返回 List。</p>
<p>示例 1-65 Project 实体</p>
<p>@Entity public class Project {<br>    …<br>@ManyToMany<br>@OrderBy(“lastname ASC”, “seniority DESC”)<br>public List<employee> getEmployees() {<br>    …<br>    };<br>    …<br>}</employee></p>
<p>示例 1-66 Employee 实体</p>
<p>@Entity public class Employee {<br>@Id<br>private int empId;<br>    …<br>private String lastname;<br>    …<br>private int seniority;<br>    …<br>@ManyToMany(mappedBy=”employees”)<br>// By default, returns a List in ascending order by empId<br>public List<project> getProjects() {<br>    …<br>    };<br>    …<br>}</project></p>
<h1 id="PersistenceContext"><a href="#PersistenceContext" class="headerlink" title="@PersistenceContext"></a><strong>@PersistenceContext</strong></h1><p>在使用 JPA 持续性提供程序的应用程序中，可以使用实体管理器执行所有持续性操作（创建、读取、更新和删除）。Java EE 应用程序使用相关性注入或在 JNDI 名称空间中直接查找实体管理器获取实体管理器。</p>
<p>使用 @PersistenceContext 批注获取实体管理器：</p>
<p>·   使用相关性注入</p>
<p>·   使用 JNDI 查找按名称进行</p>
<p>·   与特定的持续性单元关联（另请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceUnit" target="_blank" rel="external">@PersistenceUnit</a>）</p>
<p>·   具有扩展的持续性上下文</p>
<p>·   使用特定的持续性属性进行了自定义（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceProperty" target="_blank" rel="external">@PersistenceProperty</a>）</p>
<p>如果有多个要指定的 @PersistenceContext，则必须使用 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceContexts" target="_blank" rel="external">@PersistenceContexts</a>。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIHEGH" target="_blank" rel="external">表 1-32</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/PersistenceContext.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-32 @PersistenceContext 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序检索默认实体管理器。  如果要注入或查找特定实体管理器，请将  name 设置为要使用的实体管理器的 String 名称。  对于相关性注入，不需要  name。  对于 JNDI 查找，必须将 name 设置为要在环境引用上下文中访问实体管理器所使用的名称。</td>
</tr>
<tr>
<td>properties</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序假设实体管理器将使用默认属性。  如果要配置包含供应商特定属性的 JPA 持续性提供程序属性（例如，请参阅<a href="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/toplink-jpa-extensions.html#persistence-xml" target="_blank" rel="external">“TopLink  JPA Persistence.xml 文件扩展”</a>），请将  properties 设置为 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceProperty" target="_blank" rel="external">@PersistenceProperty</a>  实例数组。</td>
</tr>
<tr>
<td>type</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：PersistenceContextType.TRANSACTION。  默认情况下，JPA 持续性提供程序假设实体管理器是容器管理的，并且它们的持续性上下文的生命周期伸缩到一个事务：即，持续性上下文在事务启动时开始存在，并在事务提交时停止存在。  在以下条件下，将 type 设置为 PersistenceContextType.EXTENDED：     您的持续性上下文是应用程序管理的   您希望扩展的持续性上下文在 EntityManager 实例从创建一直到关闭期间存在   您希望实体管理器在事务提交后维护对实体对象的引用   您希望调用 EntityManager 方法 persist、remove、merge 和 refresh，而不论事务是否处于活动状态</td>
</tr>
<tr>
<td>unitName</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序检索默认持续性单元的默认实体管理器。  如果要注入或查找与特定持续性单元关联的实体管理器，则将  unitName 设置为所需的 String 持续性单元名称。或者，如果要指定 EntityManagerFactory 和持续性单元，则可以使用 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceUnit" target="_blank" rel="external">@PersistenceUnit</a>。  对于相关性注入，不需要  unitName。  对于 JNDI 查找，如果指定 unitName，则由 name 访问的实体管理器必须与此持续性单元关联。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBFCBC" target="_blank" rel="external">示例 1-67</a> 显示了如何使用此批注在无状态会话中注入实体管理器，<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGHFCD" target="_blank" rel="external">示例 1-68</a> 显示了如何使用此批注在 JNDI 中查找实体管理器。</p>
<p>示例 1-67 使用 @PersistenceContext 和相关性注入</p>
<p>@Stateless<br>public class OrderEntryBean implements OrderEntry {<br>@PersistenceContext<br>EntityManager em;<br>public void enterOrder(int custID, Order newOrder) {<br>Customer cust = em.find(Customer.class, custID);<br>cust.getOrders().add(newOrder);<br>newOrder.setCustomer(cust);<br>    }<br>}</p>
<p>示例 1-68 使用 @PersistenceContext 和 JNDI 查找</p>
<p>@Stateless<br>public class OrderEntryBean implements OrderEntry {<br>@PersistenceContext(name=”OrderEM”)<br>EntityManager em;<br>public void enterOrder(int custID, Order newOrder) {<br>em = (EntityManager)ctx.lookup(“OrderEM”);<br>Customer cust = em.find(Customer.class, custID);<br>cust.getOrders().add(newOrder);<br>newOrder.setCustomer(cust);<br>    }<br>}</p>
<h1 id="PersistenceContexts"><a href="#PersistenceContexts" class="headerlink" title="@PersistenceContexts"></a><strong>@PersistenceContexts</strong></h1><p>如果要指定多个 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceContext" target="_blank" rel="external">@PersistenceContext</a>，则必须使用一个@PersistenceContexts 批注指定所有持续性上下文。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIFJIC" target="_blank" rel="external">表 1-33</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/PersistenceContexts.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-33 @PersistenceContexts 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>value</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>要指定两个或更多持续性上下文，请将  value 设置为 PersistenceContext 实例数组（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceContext" target="_blank" rel="external">@PersistenceContext</a>）。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGEHJF" target="_blank" rel="external">示例 1-69</a> 显示了如何使用此批注指定两个持续性上下文。</p>
<p>示例 1-69 @PersistenceContexts</p>
<p>@Stateless<br>public class OrderEntryBean implements OrderEntry {<br>@PersistenceContexts({<br>@PersistenceContext(name=”OrderEM”)<br>@PersistenceContext(name=”ItemEM”),<br>    })<br>public void enterOrder(int custID, Order newOrder) {<br>EntityManager em = (EntityManager)ctx.lookup(“OrderEM”);<br>Customer cust = em.find(Customer.class, custID);<br>cust.getOrders().add(newOrder);<br>newOrder.setCustomer(cust);<br>    }<br>public void enterItem(int orderID, Item newItem) {<br>EntityManager em = (EntityManager)ctx.lookup(“ItemEM”);<br>    …<br>    }<br>}</p>
<h1 id="PersistenceProperty"><a href="#PersistenceProperty" class="headerlink" title="@PersistenceProperty"></a><strong>@PersistenceProperty</strong></h1><p>默认情况下，JPA 持续性提供程序假设您使用 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceContext" target="_blank" rel="external">@PersistenceContext</a>获取的实体管理器将使用默认属性。</p>
<p>使用 @PersistenceProperty 批注指定属性（包括供应商特定的属性），以便容器或持续性提供程序：</p>
<p>·   自定义实体管理器行为</p>
<p>·   利用供应商的 JPA 持续性提供程序实现中的特定特性</p>
<p>创建实体管理器时将属性传递给持续性提供程序。无法识别的属性被简单地忽略。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDEDFAA" target="_blank" rel="external">表 1-34</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/PersistenceProperty.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-34 @PersistenceProperty 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>要指定持续性属性的名称，请将  name 设置为 String 属性名。  有关持续性属性的详细信息，请参阅 JPA 持续性提供程序文档。</td>
</tr>
<tr>
<td>value</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>要指定持续性属性的值，请将  value 设置为所需的 String 属性值。  有关持续性属性值的详细信息，请参阅 JPA 持续性提供程序文档。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCBGJA" target="_blank" rel="external">示例 1-70</a> 显示了如何使用 @PersistenceProperty 批注自定义查询以利用由TopLink Essentials 提供的供应商 JPA 扩展：在该示例中，该属性确保在此持续性上下文中使用一个完整的 TopLink 缓存。有关详细信息，请参阅<a href="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/toplink-jpa-extensions.html#persistence-xml" target="_blank" rel="external">“TopLinkJPA Persistence.xml 文件扩展”</a>。</p>
<p>示例 1-70 @PersistenceProperty</p>
<p>@Stateless<br>public class OrderEntryBean implements OrderEntry {<br>@PersistenceContext(<br>properties={<br>@PersistenceProperty={name=”toplink.cache.type.default”,<br>value=”CacheType.Full”}<br>        }<br>    )<br>EntityManager em;<br>public void enterOrder(int custID, Order newOrder) {<br>Customer cust = em.find(Customer.class, custID);<br>cust.getOrders().add(newOrder);<br>newOrder.setCustomer(cust);<br>    }<br>}</p>
<h1 id="PersistenceUnit"><a href="#PersistenceUnit" class="headerlink" title="@PersistenceUnit"></a><strong>@PersistenceUnit</strong></h1><p>默认情况下，JPA 持续性提供程序使用与默认持续性单元或您使用 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceContext" target="_blank" rel="external">@PersistenceContext</a>属性 unitName 指定的持续性单元关联的默认 EntityManagerFactory。</p>
<p>使用 @PersistenceUnit 批注指定EntityManagerFactory，您希望 JPA 持续性提供程序使用它来：</p>
<p>·   获取指定的实体管理器</p>
<p>·   指定 EntityManagerFactory 和持续性单元</p>
<p>如果有多个要指定的 @PersistenceUnit，则必须使用 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceUnits" target="_blank" rel="external">@PersistenceUnits</a>。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDEDFAA" target="_blank" rel="external">表 1-34</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/PersistenceUnit.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-35 @PersistenceUnit 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序从默认 EntityManagerFactory 中获取它的 EntityManager 实例。  如果希望 JPA 持续性提供程序在注入或查找实体管理器时使用特定的 EntityManagerFactory，请将 name 设置为所需的实体管理器工厂的 String 名称。  对于相关性注入，不需要  name。  对于 JNDI 查找，必须将 name 设置为要在环境引用上下文中访问实体管理器所使用的名称。</td>
</tr>
<tr>
<td>unitName</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序检索默认持续性单元的默认实体管理器。  如果要注入或查找与特定持续性单元关联的实体管理器，则将  unitName 设置为所需的 String 持续性单元名称。另请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceContext" target="_blank" rel="external">@PersistenceContext</a>。  对于相关性注入，不需要  unitName。  对于 JNDI 查找，如果指定 unitName，则由 name 访问的 EntityManagerFactory 必须与此持续性单元关联。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDHBIHH" target="_blank" rel="external">示例 1-71</a> 显示了如何使用 @PersistenceUnit 批注指定要使用的 EntityManagerFactory 的 JNDI 名称以及与该工厂关联的持续性单元名称。当 JPA 持续性提供程序使用 JNDI 获取一个使用持续性上下文 OrderEM 的实体管理器时，它将使用 JNDI 名称 OrderEMFactory 与持续性单元 OrderEMUnit 关联的 EntityManagerFactory。</p>
<p>示例 1-71 使用 @PersistenceUnit 指定工厂和单元</p>
<p>@Stateless<br>public class OrderEntryBean implements OrderEntry {<br>@PersistenceContext(name=”OrderEM”)<br>@PersistenceUnit(name=”OrderEMFactory”, unitName=”OrderEMUnit”)<br>EntityManager em;<br>public void enterOrder(int custID, Order newOrder) {<br>em = (EntityManager)ctx.lookup(“OrderEM”);<br>Customer cust = em.find(Customer.class, custID);<br>cust.getOrders().add(newOrder);<br>newOrder.setCustomer(cust);<br>    }<br>}</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDHGFB" target="_blank" rel="external">示例 1-72</a> 显示了一个使用 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceContext" target="_blank" rel="external">@PersistenceContext</a>属性 unitName 仅指定持续性单元的其他方法。在该示例中，当 JPA 持续性提供程序使用 JNDI 获取一个使用持续性上下文 OrderEM 的实体管理器时，它将使用与持续性单元OrderEMUnit 关联的默认 EntityManagerFactory。</p>
<p>示例 1-72 使用 @PersistenceContext 属性 unitName</p>
<p>@Stateless<br>public class OrderEntryBean implements OrderEntry {<br>@PersistenceContext(name=”OrderEM”, unitName=”OrderEMUnit”)<br>EntityManager em;<br>public void enterOrder(int custID, Order newOrder) {<br>em = (EntityManager)ctx.lookup(“OrderEM”);<br>Customer cust = em.find(Customer.class, custID);<br>cust.getOrders().add(newOrder);<br>newOrder.setCustomer(cust);<br>    }<br>}</p>
<h1 id="PersistenceUnits"><a href="#PersistenceUnits" class="headerlink" title="@PersistenceUnits"></a><strong>@PersistenceUnits</strong></h1><ol>
<li><p>如果要指定多个 @PersistenceUnit，则必须使用一个 @PersistenceUnits 。批注指定所有持续性上下文</p>
</li>
<li></li>
<li><p>表 1-36 列出了此批注的属性。有关更多详细信息，请参阅 API。</p>
</li>
<li></li>
<li><p>表 1-36 @PersistenceUnits 属性</p>
</li>
</ol>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>value</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>要指定两个或更多持续性单元，请将  value 设置为 PersistenceUnit 实例数组（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceUnit" target="_blank" rel="external">@PersistenceUnit</a>）。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJHAHA" target="_blank" rel="external">示例 1-73</a> 显示了如何使用此批注指定两个持续性单元。在该示例中，<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PersistenceContext" target="_blank" rel="external">@PersistenceContext</a>属性 unitName 和 @PersistenceUnit 属性 unitName 必须对应以便关联持续性上下文和持续性单元。</p>
<p>示例 1-73 @PersistenceUnits</p>
<p>@Stateless<br>public class OrderEntryBean implements OrderEntry {<br>@PersistenceContexts({<br>@PersistenceContext(name=”OrderEM”, unitName=”OrderEMUnit”)<br>@PersistenceContext(name=”ItemEM”, unitName=”ItemEMUnit”),<br>    })<br>@PersistenceUnits({<br>@PersistenceUnit(name=”OrderEMFactory”, unitName=”OrderEMUnit”),<br>@PersistenceUnit(name=”ItemEMFactory”,<br>unitName=”ItemEMUnit”)<br>    })<br>public void enterOrder(int custID, Order newOrder) {<br>EntityManager em = (EntityManager)ctx.lookup(“OrderEM”);<br>Customer cust = em.find(Customer.class, custID);<br>cust.getOrders().add(newOrder);<br>newOrder.setCustomer(cust);<br>    }<br>public void enterItem(int orderID, Item newItem) {<br>EntityManager em = (EntityManager)ctx.lookup(“ItemEM”);<br>    …<br>    }<br>}</p>
<h1 id="PrimaryKeyJoinColumn"><a href="#PrimaryKeyJoinColumn" class="headerlink" title="@PrimaryKeyJoinColumn"></a><strong>@PrimaryKeyJoinColumn</strong></h1><p>默认情况下，当一个实体使用 InheritanceType.JOINED（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Inheritance" target="_blank" rel="external">@Inheritance</a>）扩展另一个实体时，JPA 持续性提供程序假设子类的外键列与超类主表的主键列同名。</p>
<p>使用 @PrimaryKeyJoinColumn 批注：</p>
<p>·   如果子类的外键列与该情形中超类的主表的主键列不同名</p>
<p>·   使用 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SecondaryTable" target="_blank" rel="external">@SecondaryTable</a>批注将辅助表连接到主表</p>
<p>·   在 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#OneToOne" target="_blank" rel="external">@OneToOne</a>映射中，引用实体的主键用作被引用实体的外键。</p>
<p>·   使用复合外键（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PrimaryKeyJoinColumns" target="_blank" rel="external">@PrimaryKeyJoinColumns</a>）</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIJEGA" target="_blank" rel="external">表 1-37</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/PrimaryKeyJoinColumn.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-37 @PrimaryKeyJoinColumn 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>columnDefinition</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：空 String。  默认情况下，JPA 使用最少量 SQL 创建一个数据库表列。  如果需要使用更多指定选项创建的列，请将  columnDefinition 设置为在生成列的 DDL 时希望 JPA 使用的 String SQL 片断。  不要将此属性与 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#OneToOne" target="_blank" rel="external">@OneToOne</a>  映射一起使用。</td>
</tr>
<tr>
<td>name</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序对当前表的主键列采用以下名称之一（取决于您使用该批注的方式）：     InheritanceType.JOINED（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Inheritance" target="_blank" rel="external">@Inheritance</a>）：与超类的主键列同名。   <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SecondaryTable" target="_blank" rel="external">@SecondaryTable</a>       映射：与主表的主键列同名。   <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#OneToOne" target="_blank" rel="external">@OneToOne</a>       映射：与引用实体的表的主键列同名。    如果该名称难于处理、是一个保留字、与事先存在的数据模型不兼容或作为数据库中的列名无效，则将  name 设置为所需的 String 列名。</td>
</tr>
<tr>
<td>referencedColumnName</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序对连接到的表的主键列采用以下名称之一（取决于您使用该批注的方式）：     InheritanceType.JOINED（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Inheritance" target="_blank" rel="external">@Inheritance</a>）：与超类的主表的主键列同名。   <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SecondaryTable" target="_blank" rel="external">@SecondaryTable</a>       映射：与主表的主键列同名。   <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#OneToOne" target="_blank" rel="external">@OneToOne</a>       映射：与被引用实体的表的主键列同名。    如果该名称难于处理、是一个保留字、与预先存在的数据模型不兼容或作为数据库中的列名无效，请将  referencedColumnName 设置为所需的 String 列名。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIADHH" target="_blank" rel="external">示例 1-74</a> 显示了一个实体基类 Customer，<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJCBDC" target="_blank" rel="external">示例 1-75</a> 显示了如何使用 @PrimaryKeyJoinColumn 在 ValuedCustomer（Customer 的一个子类）的主表中指定主键连接列 CUST_ID。</p>
<p>示例 1-74 @PrimaryKeyJoinColumn - InheritanceType.JOINED 超类</p>
<p>@Entity<br>@Table(name=”CUST”)<br>@Inheritance(strategy=JOINED)<br>@DiscriminatorValue(“CUST”)<br>public class Customer {<br>    …<br>}</p>
<p>示例 1-75 @PrimaryKeyJoinColumn - InheritanceType.JOINED 子类</p>
<p>@Entity<br>@Table(name=”VCUST”)<br>@DiscriminatorValue(“VCUST”)<br>@PrimaryKeyJoinColumn(name=”CUST_ID”)<br>public class ValuedCustomer extends Customer {<br>    …<br>}</p>
<h1 id="PrimaryKeyJoinColumns"><a href="#PrimaryKeyJoinColumns" class="headerlink" title="@PrimaryKeyJoinColumns"></a><strong>@PrimaryKeyJoinColumns</strong></h1><p>默认情况下，JPA 持续性提供程序假设每个实体有一个单列主键。</p>
<p>如果要指定一个由两个或更多列组成的主键，请使用@PrimaryKeyJoinColumns 批注。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJFFEG" target="_blank" rel="external">表 1-38</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/PrimaryKeyJoinColumns.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-38 @PrimaryKeyJoinColumns 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>value</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>要指定一个复合（多列）主键，请将  value 设置为 PrimaryKeyJoinColumn 实例的数组（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PrimaryKeyJoinColumn" target="_blank" rel="external">@PrimaryKeyJoinColumn</a>）。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJGBEJ" target="_blank" rel="external">示例 1-76</a> 显示了如何使用此批注指定一个由列 CUST_ID 和 CUST_TYPE 组成的复合主键。</p>
<p>示例 1-76 @PrimaryKeyJoinColumns</p>
<p>@Entity<br>@Table(name=”VCUST”)<br>@DiscriminatorValue(“VCUST”)<br>@PrimaryKeyJoinColumns({<br>@PrimaryKeyJoinColumn(name=”CUST_ID”,referencedColumnName=”ID”),<br>@PrimaryKeyJoinColumn(name=”CUST_TYPE”,referencedColumnName=”TYPE”)<br>})<br>public class ValuedCustomer extends Customer {<br>    …<br>}</p>
<h1 id="QueryHint"><a href="#QueryHint" class="headerlink" title="@QueryHint"></a><strong>@QueryHint</strong></h1><p>默认情况下，JPA 持续性提供程序假设 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedQuery" target="_blank" rel="external">@NamedQuery</a>或 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedNativeQuery" target="_blank" rel="external">@NamedNativeQuery</a>应完全按照查询 String 指定的方式执行。</p>
<p>使用 @QueryHint 批注指定供应商特定的 JPA 查询扩展，以：</p>
<ul>
<li>提高查询性能</li>
<li>利用供应商的 JPA 持续性提供程序实现中的特定特性</li>
</ul>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCJEHE" target="_blank" rel="external">表 1-6</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/QueryHint.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-39 @QueryHint 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>要指定提示名称，请将  name 设置为 String 提示名称。  有关提示的详细信息，请参阅 JPA 持续性提供程序文档。</td>
</tr>
<tr>
<td>value</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>要指定提示的值，请将  value 设置为所需的 String 提示值。  有关提示值的详细信息，请参阅 JPA 持续性提供程序文档。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGEIHE" target="_blank" rel="external">示例 1-77</a> 显示了如何使用 @QueryHint 批注自定义查询以利用由TopLink Essentials 提供的供应商 JPA 扩展：在该示例中，提示确保在执行查询时始终刷新 TopLink 缓存。有关详细信息，请参阅<a href="http://www.oracle.com/technology/products/ias/toplink/jpa/resources/toplink-jpa-extensions.html#QueryHints" target="_blank" rel="external">“TopLinkJPA 查询提示扩展”</a>。</p>
<p>示例 1-77 @QueryHint</p>
<p>@Entity<br>@NamedQuery(<br>name=”findAllEmployees”,<br>query=”SELECT * FROM EMPLOYEE WHERE MGR=1”<br>hints={@QueryHint={name=”toplink.refresh”, value=”true”}}<br>)<br>public class Employee implements Serializable {<br>    …<br>}</p>
<h1 id="SecondaryTable"><a href="#SecondaryTable" class="headerlink" title="@SecondaryTable"></a><strong>@SecondaryTable</strong></h1><p>默认情况下，JPA 持续性提供程序假设实体的所有持久字段均存储到一个名称为实体名称的数据库表中：该表称作主表（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Table" target="_blank" rel="external">@Table</a>）。</p>
<p>如果希望 JPA 分别将实体的某些持久字段持久保存到主表和其他数据库表，请使用 @SecondaryTable 批注将实体与其他数据库表关联。在该示例中，您使用 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Column" target="_blank" rel="external">@Column</a>批注将实体的持久字段与表关联。</p>
<p>如果要将两个或更多辅助表与实体关联，则可以使用<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SecondaryTables" target="_blank" rel="external">@SecondaryTables</a>。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGJJJA" target="_blank" rel="external">表 1-40</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/SecondaryTable.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-40 @SecondaryTable 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>姓名</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>如果实体使用辅助表，请将  name 设置为 String 表名。</td>
</tr>
<tr>
<td>catalog</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序使用任何适用于数据库的默认目录。  如果默认目录不适合于应用程序，请将  catalog 设置为要使用的 String 目录名。</td>
</tr>
<tr>
<td>pkJoinColumns</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序假设实体的数据库表中的任何列均不用于主键连接。  如果对该表中的主键连接使用一个或多个列，请将  pkJoinColumns 设置为一个或多个 @PrimaryKeyJoinColumn 实例的数组。有关详细信息，请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#PrimaryKeyJoinColumn" target="_blank" rel="external">@PrimaryKeyJoinColumn</a>。</td>
</tr>
<tr>
<td>schema</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序使用任何适用于数据库的默认模式。  如果默认模式不适合于应用程序，请将  schema 设置为要使用的 String 模式名。</td>
</tr>
<tr>
<td>uniqueConstraints</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序假设实体的数据库表中的任何列均没有唯一约束。  如果唯一约束应用于该表中的一列或多列，请将  uniqueContraints 设置为一个或多个 UniqueConstraint 实例的数组。有关详细信息，请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#UniqueConstraint" target="_blank" rel="external">@UniqueConstraint</a>。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBCEGC" target="_blank" rel="external">示例 1-78</a> 显示了如何使用此批注指定一个名为 EMP_HR 的辅助表。在该示例中，默认情况下，JPA 将实体持久字段 empId 持久保存到名为 Employee 的主表中的列 empId，并将 empSalary 持久保存到辅助表 EMP_HR 中的列 empSalary。有关详细信息，请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Column" target="_blank" rel="external">@Column</a>。</p>
<p>示例 1-78 @SecondaryTable</p>
<p>@Entity<br>@SecondaryTable(name=”EMP_HR”)<br>public class Employee implements Serializable {<br>    …<br>private Long empId;<br>@Column(table=”EMP_HR”, name=”EMP_SALARY”))<br>private Float empSalary;<br>    …<br>}</p>
<h1 id="SecondaryTables"><a href="#SecondaryTables" class="headerlink" title="@SecondaryTables"></a><strong>@SecondaryTables</strong></h1><p>如果需要指定多个 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SecondaryTable" target="_blank" rel="external">@SecondaryTable</a>，可以使用一个@SecondaryTables 批注指定所有辅助表。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDHBEIA" target="_blank" rel="external">表 1-41</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/SecondaryTables.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-41 @SecondaryTables 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>value</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>要指定两个或更多辅助表，请将  value 设置为 SecondaryTable 实例的数组（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SecondaryTable" target="_blank" rel="external">@SecondaryTable</a>）。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDHBGB" target="_blank" rel="external">示例 1-79</a> 显示了如何使用此批注指定两个名为 EMP_HR 和 EMP_TR 的辅助表。在该示例中，默认情况下，JPA 将实体持久字段 empId 持久保存到名为 Employee 的主表中的列 empId。JPA 将 empSalary 持久保存到辅助表 EMP_HR 中的列 empSalary，并将 empClass 持久保存到辅助表 EMP_TR 中的列 EMP_HR。有关详细信息，请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Column" target="_blank" rel="external">@Column</a>。</p>
<p>示例 1-79 @SecondaryTables</p>
<p>@Entity<br>@SecondaryTables({<br>@SecondaryTable(name=”EMP_HR”),<br>@SecondaryTable(name=”EMP_TR”)<br>    })<br>public class Employee implements Serializable {<br>    …<br>private Long empId;<br>@Column(table=”EMP_HR”, name=”EMP_SALARY”))<br>private Float empSalary;<br>@Column(table=”EMP_TR”, name=”EMP_CLASS”))<br>private Float empClass;<br>    …<br>}</p>
<h1 id="SequenceGenerator"><a href="#SequenceGenerator" class="headerlink" title="@SequenceGenerator"></a><strong>@SequenceGenerator</strong></h1><p>如果使用 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#GeneratedValue" target="_blank" rel="external">@GeneratedValue</a>批注指定一个 SEQUENCE 类型的主键生成器，则可以使用 @SequenceGenerator 批注微调该主键生成器以：</p>
<ul>
<li>更改分配大小以匹配应用程序要求或数据库性能参数</li>
<li>更改初始值以匹配现有的数据模型（例如，如果基于已经为其分配或保留了一组主键值的现有数据集构建）</li>
<li>使用现有数据模型中预定义的序列</li>
</ul>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBBBBA" target="_blank" rel="external">表 1-42</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/SequenceGenerator.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-42 @SequenceGenerator 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>SequenceGenerator 的名称必须匹配其 startegy 设置为 SEQUENCE 的 GeneratedValue 的名称。</td>
</tr>
<tr>
<td>allocationSize</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值： 50.  默认情况下，JPA 持续性提供程序使用的分配大小为 50。  如果此分配大小与应用程序要求或数据库性能参数不匹配，请将  allocationSize 设置为所需的 int 值。</td>
</tr>
<tr>
<td>initialValue</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值： 0.  默认情况下，JPA 持续性提供程序假设持续性提供程序将所有主键值的起始值设置为 0。  如果这与现有数据模型不匹配，请将  initialValue 设置为所需的 int 值。</td>
</tr>
<tr>
<td>sequenceName</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序分配它自己创建的序列名。  如果要使用事先存在或预定义的序列，请将  sequenceName 设置为所需的 String 名称。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBFFAH" target="_blank" rel="external">示例 1-80</a> 显示了如何使用此批注为名为 CUST_SEQ 的 SEQUENCE 主键生成器指定分配大小。</p>
<p>示例 1-80 @SequenceGenerator</p>
<p>@Entity<br>public class Employee implements Serializable {<br>    …<br>@Id<br>@SequenceGenerator(name=”CUST_SEQ”, allocationSize=25)<br>@GeneratedValue(strategy=SEQUENCE, generator=”CUST_SEQ”)<br>@Column(name=”CUST_ID”)<br>public Long getId() {<br>return id;<br>    }<br>    …</p>
<h1 id="SqlResultSetMapping"><a href="#SqlResultSetMapping" class="headerlink" title="@SqlResultSetMapping"></a><strong>@SqlResultSetMapping</strong></h1><p>执行 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#NamedNativeQuery" target="_blank" rel="external">@NamedNativeQuery</a>时，它可以返回实体（包括不同类型的实体）、标量值或实体和标量值的组合。</p>
<p>默认情况下（如<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJJDFF" target="_blank" rel="external">示例 1-81</a> 所示），JPA 持续性提供程序假设原生 SQL 查询中的 SELECT 语句：</p>
<ul>
<li>返回一个实体类型</li>
<li>包含与返回的实体的所有字段或属性相对应的所有列</li>
<li>使用与字段或属性名（未使用 AS 语句）相对应的列名</li>
</ul>
<p>示例 1-81 简单的原生 SQL 查询</p>
<p>Query q = entityManager.createNativeQuery(<br>“SELECT o.id, o.quantity, o.item “ +<br>“FROM Order o, Item i “ +<br>“WHERE (o.item = i.id) AND (i.name = “widget”)”,<br>Order.class<br>);<br>List resultList = q.getResultList();<br>// List of Order entity objects:{Order, Order, …}</p>
<p>如果原生 SQL 查询满足以下条件，请使用 @SqlResultSetMapping 批注控制 JPA 持续性提供程序如何将 JDBC 结果集映射到实体字段或属性以及标量：</p>
<ul>
<li>返回多个类型的实体</li>
<li>只返回标量值或实体和标量值的组合</li>
<li>使用列别名（AS 语句）</li>
</ul>
<p>如果有多个 @SqlResultSetMapping，则必须使用 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SqlResultSetMappings" target="_blank" rel="external">@SqlResultSetMappings</a>。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGAGFI" target="_blank" rel="external">表 1-8</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/SqlResultSetMapping.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-43 @SqlResultSetMapping 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>将 name 设置为此 @SqlResultSetMapping 的 String 名称。  这是用于将 @SqlResultSetMapping 与原生 SQL 查询关联的名称（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGIJGJ" target="_blank" rel="external">示例 1-84</a>）。</td>
</tr>
<tr>
<td>columns</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：空 ColumnResult 数组。  默认情况下，JPA 持续性提供程序假设 SELECT 语句只返回实体。  如果 SELECT 语句返回标量值，则将 columns 设置为 ColumnResult 实例的数组，每个标量结果一个 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#ColumnResult" target="_blank" rel="external">@ColumnResult</a>。</td>
</tr>
<tr>
<td>entities</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：空 EntityResult 数组。  默认情况下，JPA 持续性提供程序假设 SELECT 语句返回一个类型的实体。  如果 SELECT 语句返回多个类型的实体，请将实体设置为 EntityResult 实例的数组，每个返回的实体类型一个 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#EntityResult" target="_blank" rel="external">@EntityResult</a>。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGCJHD" target="_blank" rel="external">示例 1-82</a> 显示了如何使用此批注将 Order 和 Item（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCBAEJ" target="_blank" rel="external">示例 1-83</a>）实体和标量 name 包含在结果列表（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGIJGJ" target="_blank" rel="external">示例 1-84</a>）中。在该示例中，结果列表将为 Object 数组的 List，如：{[Order, Item,”Shoes”], [Order, Item, “Socks”], …}。</p>
<p>示例 1-82 使用 @SqlResultSetMapping 的 Order 实体</p>
<p>@SqlResultSetMapping(<br>name=”OrderResults”,<br>entities={<br>@EntityResult(<br>entityClass=Order.class,<br>fields={<br>@FieldResult(name=”id”,<br>column=”order_id”),<br>@FieldResult(name=”quantity”, column=”order_quantity”),<br>@FieldResult(name=”item”,<br>column=”order_item”)<br>            }<br>        ),<br>@EntityResult(<br>entityClass=Item.class,<br>fields={<br>@FieldResult(name=”id”,<br>column=”item_id”),<br>@FieldResult(name=”name”,<br>column=”item_name”),<br>            }<br>        )<br>    }<br>columns={<br>@ColumnResult(<br>name=”item_name”<br>        )<br>    }<br>)<br>@Entity<br>public class Order {<br>@Id<br>protected int id;<br>protected long quantity;<br>protected Item item;<br>    …<br>}</p>
<p>示例 1-83 Item 实体</p>
<p>@Entity<br>public class Item {<br>@Id<br>protected int id;<br>protected String name;<br>    …<br>}</p>
<p>示例 1-84 将 @SqlResultSetMapping 与 @EntityResult 一起使用的原生查询</p>
<p>Query q = entityManager.createNativeQuery(<br>“SELECT o.id       AS order_id,<br>“ +<br>“o.quantity AS order_quantity, “ +<br>“o.item     AS order_item, “ +<br>“i.id       AS item_id, “ +<br>“i.name     AS item_name, “ +<br>“FROM Order o, Item i “ +<br>“WHERE (order_quantity &gt; 25) AND (order_item = i.id)”,<br>“OrderResults”<br>);<br>List resultList = q.getResultList();<br>// List of Object arrays:{[Order, Item, “Shoes”], [Order, Item,<br>“Socks”], …}</p>
<h1 id="SqlResultSetMappings"><a href="#SqlResultSetMappings" class="headerlink" title="@SqlResultSetMappings"></a><strong>@SqlResultSetMappings</strong></h1><p>如果需要指定多个 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SqlResultSetMapping" target="_blank" rel="external">@SqlResultSetMapping</a>，则必须使用一个@SqlResultSetMappings 批注指定所有 SQL 结果集映射。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFHDBB" target="_blank" rel="external">表 1-5</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/SqlResultSetMappings.html" target="_blank" rel="external">API</a>。</p>
<p>表 1-44 @SqlResultSetMappings 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>value</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>要指定两个或更多 SQL 结果集映射，请将 value 设置为 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SqlResultSetMapping" target="_blank" rel="external">@SqlResultSetMapping</a>  实例的数组。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCFDJJ" target="_blank" rel="external">示例 1-85</a> 显示了如何使用此批注指定两个 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SqlResultSetMapping" target="_blank" rel="external">@SqlResultSetMapping</a>实例。</p>
<p>示例 1-85 @SqlResultSetMappings</p>
<p>SqlResultSetMappings({<br>@SqlResultSetMapping(<br>name=”OrderItemItemNameResults”,<br>entities={<br>@EntityResult(entityClass=Order.class),<br>@EntityResult(entityClass=Item.class)<br>        }<br>columns={<br>@ColumnResult(name=”item_name”)<br>        }<br>    ),<br>@SqlResultSetMapping(<br>name=”OrderItemResults”,<br>entities={<br>@EntityResult(entityClass=Order.class),<br>@EntityResult(entityClass=Item.class)<br>        }<br>    )<br>})<br>@Entity<br>public class Order {<br>@Id<br>protected int id;<br>protected long quantity;<br>protected Item item;<br>    …<br>}</p>
<h1 id="Table-1"><a href="#Table-1" class="headerlink" title="@Table"></a><strong>@Table</strong></h1><p>默认情况下，JPA 持续性提供程序假设实体的所有持久字段均存储到一个名称为实体名称的数据库表中（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Entity" target="_blank" rel="external">@Entity</a>）。</p>
<p>在以下条件下，使用 @Table 批注指定与实体关联的主表：</p>
<ul>
<li>实体名称难于处理、是一个保留字、与预先存在的数据模型不兼容或作为数据库中的表名无效</li>
<li>需要控制表所属的目录或模式</li>
</ul>
<p>如果希望 JPA 将某些字段持久保存到主表，而将其他字段持久保存到一个或多个辅助表，请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#SecondaryTable" target="_blank" rel="external">@SecondaryTable</a>。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDGEAJB" target="_blank" rel="external">表 1-45</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Table.html" target="_blank" rel="external">API</a>。</p>
<p>表1-45 @Table 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>catalog</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序使用任何适用于数据库的默认目录。  如果默认目录不适合于应用程序，请将  catalog 设置为要使用的 String 目录名。</td>
</tr>
<tr>
<td>name</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序假设实体的数据库表与实体类同名。在<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCGHGA" target="_blank" rel="external">示例 1-86</a> 中，默认 name 为 Employee。  如果实体类名难以处理、是一个保留字或与预先存在的数据模型不兼容，请将  name 设置为相应的数据表名称。在<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCGHGA" target="_blank" rel="external">示例 1-86</a> 中，JPA 将实体类 Employee 持久保存到名为 EMP 的数据库表中。</td>
</tr>
<tr>
<td>schema</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序使用任何适用于数据库的默认模式。  如果默认模式不适合于应用程序，请将  schema 设置为要使用的 String 模式名。</td>
</tr>
<tr>
<td>uniqueConstraints</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序假设实体的数据库表中的任何列均没有唯一约束。  如果唯一约束应用于该表中的一列或多列，请将 uniqueContraints 设置为一个或多个 UniqueConstraint 实例的数组。有关详细信息，请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#UniqueConstraint" target="_blank" rel="external">@UniqueConstraint</a>。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCGHGA" target="_blank" rel="external">示例 1-86</a> 显示了如何使用此批注指定主表名。</p>
<p>示例 1-86 @Table</p>
<p>@Entity<br>@Table(name=”EMP”)<br>public class Employee implements Serializable {<br>    …<br>}</p>
<h1 id="TableGenerator-1"><a href="#TableGenerator-1" class="headerlink" title="@TableGenerator"></a><strong>@TableGenerator</strong></h1><p>如果使用 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#GeneratedValue" target="_blank" rel="external">@GeneratedValue</a>批注指定一个 TABLE 类型的主键生成器，可以使用 @TableGenerator 批注微调该主键生成器以：</p>
<ul>
<li>由于名称难于处理、是一个保留字、与预先存在的数据模型不兼容或作为数据库中的表名无效而更改主键生成器的表名称</li>
<li>更改分配大小以匹配应用程序要求或数据库性能参数</li>
<li>更改初始值以匹配现有的数据模型（例如，如果基于已经为其分配或保留了一组主键值的现有数据集构建）</li>
<li>使用特定目录或模式配置主键生成器的表</li>
<li>在主键生成器表的一列或多列商配置一个唯一的约束</li>
</ul>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDJDBGJ" target="_blank" rel="external">表 1-46</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/TableGenerator.html" target="_blank" rel="external">API</a>。</p>
<p>表1-46 @TableGenerator 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>SequenceGenerator 的名称必须匹配其 startegy 设置为 startegy 的 GeneratedValue 的名称。生成器名称的作用域对持续性单元是全局的（跨所有生成器类型）。</td>
</tr>
<tr>
<td>allocationSize</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值： 50.  默认情况下，JPA 持续性提供程序使用的分配大小为 50。  如果此分配大小与应用程序要求或数据库性能参数不匹配，请将  allocationSize 设置为所需的 int 值。</td>
</tr>
<tr>
<td>catalog</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序使用任何适用于数据库的默认目录。  如果默认目录不适合于应用程序，请将  catalog 设置为要使用的 String 目录名。</td>
</tr>
<tr>
<td>initialValue</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值： 0.  默认情况下，JPA 持续性提供程序将所有主键值的起始值设置为 0。  如果这与现有数据模型不匹配，请将  initialValue 设置为所需的 int 值。</td>
</tr>
<tr>
<td>pkColumnName</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序为生成器表中的主键列提供名称。  如果该名称不适合于应用程序，请将  pkColumnName 设置为所需的 String 名称。</td>
</tr>
<tr>
<td>pkColumnValue</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序为生成器表中的主键列提供一个合适的主键值。  如果该值不适合于应用程序，请将  pkColumnValue 设置为所需的 String 值。</td>
</tr>
<tr>
<td>schema</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序使用任何适用于数据库的默认模式。  如果默认模式不适合于应用程序，请将  schema 设置为要使用的 String 模式名。</td>
</tr>
<tr>
<td>table</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序为存储生成的 ID 值的表提供了一个合适的名称。  如果默认表名不适合于应用程序，请将  table 设置为所需的 String 表名。</td>
</tr>
<tr>
<td>uniqueConstraints</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序假设主键生成器表中的任何列均没有唯一约束。  如果唯一约束应用于该表中的一列或多列，则将  uniqueContraints 设置为一个或多个 UniqueConstraint 实例的数组。有关详细信息，请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#UniqueConstraint" target="_blank" rel="external">@UniqueConstraint</a>。</td>
</tr>
<tr>
<td>valueColumnName</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image001.gif" alt="可选"></td>
<td>默认值：JPA 持续性提供程序为存储生成的 ID 值的列提供了一个合适的名称。  如果默认列名不适合于应用程序，请将  valueColumnName 设置为所需的 String 列名。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCIBFC" target="_blank" rel="external">示例 1-87</a> 显示了如何使用此批注为名为 empGen 的 TABLE 主键生成器指定分配大小。</p>
<p>示例 1-87 @TableGenerator</p>
<p>@Entity<br>public class Employee implements Serializable {<br>    …<br>@Id<br>@TableGenerator(<br>name=”empGen”,<br>allocationSize=1<br>    )<br>@GeneratedValue(strategy=TABLE, generator=”empGen”)<br>@Column(name=”CUST_ID”)<br>public Long getId() {<br>return id;<br>    }<br>    …</p>
<h1 id="Temporal-1"><a href="#Temporal-1" class="headerlink" title="@Temporal"></a><strong>@Temporal</strong></h1><p>使用 @Temporal 批注指定 JPA 持续性提供程序应只为 java.util.Date 和 java.util.Calendar 类型的字段或属性持久保存的数据库类型。</p>
<p>该批注可以与 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Basic" target="_blank" rel="external">@Basic</a>一起使用。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFIAEE" target="_blank" rel="external">表 1-14</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Temporal.html" target="_blank" rel="external">API</a>。</p>
<p>表1-47 @Temporal 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>value</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>将 value 设置为与希望 JPA 持续性提供程序使用的数据库类型相对应的 TemporalType：     DATE - 等于 java.sql.Date   TIME - 等于 java.sql.Time   TIMESTAMP - 等于 java.sql.Timestamp</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDBJJCD" target="_blank" rel="external">示例 1-88</a> 显示了如何使用此批注指定 JPA 持续性提供程序应将 java.util.Date 字段 startDate 持久保存为 DATE (java.sql.Date) 数据库类型。</p>
<p>示例 1-88 @Temporal</p>
<p>@Entity<br>public class Employee {<br>    …<br>@Temporal(DATE)    protected<br>java.util.Date startDate;<br>    …<br>}</p>
<h1 id="Transient-1"><a href="#Transient-1" class="headerlink" title="@Transient"></a><strong>@Transient</strong></h1><p>默认情况下，JPA 持续性提供程序假设实体的所有字段均为持久字段。</p>
<p>使用 @Transient 批注指定实体的非持久字段或属性，例如，一个在运行时使用但并非实体状态一部分的字段或属性。</p>
<p>JPA 持续性提供程序不会对批注为 @Transient 的属性或字段持久保存（或创建数据库模式）。</p>
<p>该批注可以与 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Entity" target="_blank" rel="external">@Entity</a>、<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#MappedSuperclass" target="_blank" rel="external">@MappedSuperclass</a>和 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Embeddable" target="_blank" rel="external">@Embeddable</a>一起使用。</p>
<p>该批注没有属性。有关更多详细信息，请参阅<a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Transient.html" target="_blank" rel="external">API</a>。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDIHFCF" target="_blank" rel="external">示例 1-89</a> 显示了如何使用此批注将 Employee 字段 currentSession 指定为非持久字段。JPA 持续性提供程序将不持久保存该字段。</p>
<p>示例 1-89 @Transient</p>
<p>@Entitypublic class Employee {    @Id int id;    @Transient Session currentSession;    …}</p>
<h1 id="UniqueConstraint-1"><a href="#UniqueConstraint-1" class="headerlink" title="@UniqueConstraint"></a><strong>@UniqueConstraint</strong></h1><p>默认情况下，JPA 持续性提供程序假设所有列均可以包含重复值。</p>
<p>使用 @UniqueConstraint 批注指定将在为主表或辅助表生成的 DDL 中包含一个唯一约束。或者，您可以在列级别指定唯一约束（请参阅<a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Column" target="_blank" rel="external">@Column</a>）。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDFDEEA" target="_blank" rel="external">表 1-48</a> 列出了此批注的属性。有关更多详细信息，请参阅 <a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/UniqueConstraint.html" target="_blank" rel="external">API</a>。</p>
<p>表1-48 @UniqueConstraint 属性</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>必需</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>columnNames</td>
<td><img src="file:///C:\Users\fly\AppData\Local\Temp\msohtmlclip1\01\clip_image002.gif" alt="必需"></td>
<td>如果任何列均包含唯一约束，请将  columnNames 设置为 String 列名的数组。</td>
</tr>
</tbody>
</table>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDDBCAF" target="_blank" rel="external">示例 1-90</a> 显示了如何使用此批注对主表 EMP 中的列 EMP_ID 和 EMP_NAME 指定一个唯一约束。</p>
<p>示例 1-90 使用唯一约束的 @Table</p>
<p>@Entity<br>@Table(<br>name=”EMP”,<br>uniqueConstraints={@UniqueConstraint(columnNames={“EMP_ID”,<br>“EMP_NAME”})}<br>)<br>public class Employee implements Serializable {<br>    …<br>}</p>
<h1 id="Version-1"><a href="#Version-1" class="headerlink" title="@Version"></a><strong>@Version</strong></h1><p>默认情况下，JPA 持续性提供程序假设应用程序负责数据一致性。</p>
<p>使用 @Version 批注通过指定用作其乐观锁定值的实体类的版本字段或属性来启用 JPA 管理的乐观锁定（推荐做法）。</p>
<p>选择版本字段或属性时，确保：</p>
<ul>
<li>每个实体只有一个版本字段或属性</li>
<li>选择一个持久保存到主表的属性或字段（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Table" target="_blank" rel="external">@Table</a>）</li>
<li>您的应用程序不修改版本属性或字段</li>
</ul>
<p>此批注没有属性。有关更多详细信息，请参阅<a href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Version.html" target="_blank" rel="external">API</a>。</p>
<p><a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#CHDCIBDJ" target="_blank" rel="external">示例 1-91</a> 显示了如何使用此批注将属性 getVersionNum 指定为乐观锁定值。在该示例中，该属性的列名设置为 OPTLOCK（请参阅 <a href="http://www.oracle.com/technology/global/cn/products/ias/toplink/jpa/resources/toplink-jpa-annotations.html#Column" target="_blank" rel="external">@Column</a>），而非属性的默认列名。</p>
<p>示例 1-91 @Version</p>
<p>@Entity<br>public class Employee implements Serializable {<br>    …<br>@Version<br>@Column(name=”OPTLOCK”)<br>protected int getVersionNum() {<br>return versionNum;<br>    }<br>    …<br>}</p>

      
    </div>

    <div>
      
        
      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/java/" rel="tag">#java</a>
          
            <a href="/tags/jpa/" rel="tag">#jpa</a>
          
            <a href="/tags/api/" rel="tag">#api</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/01/19/CentOS安装jdk/" rel="next" title="CentOS安装jdk">
                <i class="fa fa-chevron-left"></i> CentOS安装jdk
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="fly" />
          <p class="site-author-name" itemprop="name">fly</p>
          <p class="site-description motion-element" itemprop="description">always upper</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">4</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Table"><span class="nav-number">1.</span> <span class="nav-text">@Table</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#TableGenerator"><span class="nav-number">2.</span> <span class="nav-text">@TableGenerator</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Temporal"><span class="nav-number">3.</span> <span class="nav-text">@Temporal</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Transient"><span class="nav-number">4.</span> <span class="nav-text">@Transient</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#UniqueConstraint"><span class="nav-number">5.</span> <span class="nav-text">@UniqueConstraint</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Version"><span class="nav-number">6.</span> <span class="nav-text">@Version</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Column"><span class="nav-number">7.</span> <span class="nav-text">@Column</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ColumnResult"><span class="nav-number">8.</span> <span class="nav-text">@ColumnResult</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DiscriminatorColumn"><span class="nav-number">9.</span> <span class="nav-text">@DiscriminatorColumn</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DiscriminatorValue"><span class="nav-number">10.</span> <span class="nav-text">@DiscriminatorValue</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Embeddable"><span class="nav-number">11.</span> <span class="nav-text">@Embeddable</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Embedded"><span class="nav-number">12.</span> <span class="nav-text">@Embedded</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#EmbeddedId"><span class="nav-number">13.</span> <span class="nav-text">@EmbeddedId</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Entity"><span class="nav-number">14.</span> <span class="nav-text">@Entity</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#EntityListeners"><span class="nav-number">15.</span> <span class="nav-text">@EntityListeners</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#EntityResult"><span class="nav-number">16.</span> <span class="nav-text">@EntityResult</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Enumerated"><span class="nav-number">17.</span> <span class="nav-text">@Enumerated</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ExcludeDefaultListeners"><span class="nav-number">18.</span> <span class="nav-text">@ExcludeDefaultListeners</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ExcludeSuperclassListeners"><span class="nav-number">19.</span> <span class="nav-text">@ExcludeSuperclassListeners</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#FieldResult"><span class="nav-number">20.</span> <span class="nav-text">@FieldResult</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#GeneratedValue"><span class="nav-number">21.</span> <span class="nav-text">@GeneratedValue</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Id"><span class="nav-number">22.</span> <span class="nav-text">@Id</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#IdClass"><span class="nav-number">23.</span> <span class="nav-text">@IdClass</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Inheritance"><span class="nav-number">24.</span> <span class="nav-text">@Inheritance</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JoinColumn"><span class="nav-number">25.</span> <span class="nav-text">@JoinColumn</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JoinTable"><span class="nav-number">26.</span> <span class="nav-text">@JoinTable</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Lob"><span class="nav-number">27.</span> <span class="nav-text">@Lob</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ManyToMany"><span class="nav-number">28.</span> <span class="nav-text">@ManyToMany</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ManyToOne"><span class="nav-number">29.</span> <span class="nav-text">@ManyToOne</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MapKey"><span class="nav-number">30.</span> <span class="nav-text">@MapKey</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MappedSuperclass"><span class="nav-number">31.</span> <span class="nav-text">@MappedSuperclass</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#NamedNativeQueries"><span class="nav-number">32.</span> <span class="nav-text">@NamedNativeQueries</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#NamedNativeQuery"><span class="nav-number">33.</span> <span class="nav-text">@NamedNativeQuery</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#NamedQueries"><span class="nav-number">34.</span> <span class="nav-text">@NamedQueries</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#NamedQuery"><span class="nav-number">35.</span> <span class="nav-text">@NamedQuery</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#OneToMany"><span class="nav-number">36.</span> <span class="nav-text">@OneToMany</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#OneToOne"><span class="nav-number">37.</span> <span class="nav-text">@OneToOne</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#OrderBy"><span class="nav-number">38.</span> <span class="nav-text">@OrderBy</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#PersistenceContext"><span class="nav-number">39.</span> <span class="nav-text">@PersistenceContext</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#PersistenceContexts"><span class="nav-number">40.</span> <span class="nav-text">@PersistenceContexts</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#PersistenceProperty"><span class="nav-number">41.</span> <span class="nav-text">@PersistenceProperty</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#PersistenceUnit"><span class="nav-number">42.</span> <span class="nav-text">@PersistenceUnit</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#PersistenceUnits"><span class="nav-number">43.</span> <span class="nav-text">@PersistenceUnits</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#PrimaryKeyJoinColumn"><span class="nav-number">44.</span> <span class="nav-text">@PrimaryKeyJoinColumn</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#PrimaryKeyJoinColumns"><span class="nav-number">45.</span> <span class="nav-text">@PrimaryKeyJoinColumns</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#QueryHint"><span class="nav-number">46.</span> <span class="nav-text">@QueryHint</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SecondaryTable"><span class="nav-number">47.</span> <span class="nav-text">@SecondaryTable</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SecondaryTables"><span class="nav-number">48.</span> <span class="nav-text">@SecondaryTables</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SequenceGenerator"><span class="nav-number">49.</span> <span class="nav-text">@SequenceGenerator</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SqlResultSetMapping"><span class="nav-number">50.</span> <span class="nav-text">@SqlResultSetMapping</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SqlResultSetMappings"><span class="nav-number">51.</span> <span class="nav-text">@SqlResultSetMappings</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Table-1"><span class="nav-number">52.</span> <span class="nav-text">@Table</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#TableGenerator-1"><span class="nav-number">53.</span> <span class="nav-text">@TableGenerator</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Temporal-1"><span class="nav-number">54.</span> <span class="nav-text">@Temporal</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Transient-1"><span class="nav-number">55.</span> <span class="nav-text">@Transient</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#UniqueConstraint-1"><span class="nav-number">56.</span> <span class="nav-text">@UniqueConstraint</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Version-1"><span class="nav-number">57.</span> <span class="nav-text">@Version</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">fly</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  



  
  
  

  

  

</body>
</html>
